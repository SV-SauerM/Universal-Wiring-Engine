<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UWE ‚Äî Universal Wiring Engine</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Syne:wght@600;700;800&family=Inter:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --bg:        #0d0f14;
            --surface:   #13161e;
            --panel:     #191c26;
            --border:    #252836;
            --border2:   #2e3245;
            --accent:    #4f7cff;
            --accent2:   #7c5cff;
            --green:     #22d08a;
            --amber:     #f5a623;
            --red:       #ff4f6a;
            --text:      #e8eaf2;
            --muted:     #5a5f7a;
            --muted2:    #7a7f9a;
        }

        /* ‚îÄ‚îÄ LIGHT THEME ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
        body.light {
            --bg:        #eef0f4;
            --surface:   #ffffff;
            --panel:     #f5f6f9;
            --border:    #dde1ea;
            --border2:   #c5cad6;
            --accent:    #2563eb;
            --accent2:   #5b3fd1;
            --green:     #16a36a;
            --amber:     #d97706;
            --red:       #dc2626;
            --text:      #111827;
            --muted:     #6b7280;
            --muted2:    #9ca3af;
        }
        /* Light-Theme spezifische Overrides */
        body.light #overlay           { background: rgba(0,0,0,0.45); }
        body.light #modal             { box-shadow: 0 20px 60px rgba(0,0,0,0.18); }
        body.light #canvas            { box-shadow: 0 0 0 1px var(--border), 0 8px 32px rgba(0,0,0,0.12); }
        body.light .tb-popup          { box-shadow: 0 8px 32px rgba(0,0,0,0.14); }
        body.light .toast             { box-shadow: 0 4px 16px rgba(0,0,0,0.14); }
        body.light .toast.ok          { background: #d1fae5; color: #065f46; border-color: #6ee7b7; }
        body.light .toast.err         { background: #fee2e2; color: #991b1b; border-color: #fca5a5; }
        body.light .toast.warn        { background: #fef3c7; color: #92400e; border-color: #fcd34d; }
        body.light .toast.info        { background: #eff6ff; color: #1e40af; border-color: #93c5fd; }
        body.light .mgmt-btn.cloud    { background: rgba(37,99,235,0.08); border-color: rgba(37,99,235,0.3); color: #2563eb; }
        body.light .mgmt-btn.cloud:hover { background: rgba(37,99,235,0.15); }
        body.light .draw-btn.active   { color: #fff; }
        body.light .pattern-card.selected { background: rgba(37,99,235,0.06); }
        body.light #cloudPill         { background: var(--panel); }
        body.light #helpBtn           { background: var(--panel); }
        /* Logo im Light-Mode: transparenter Hintergrund, direkt auf wei√üem Topbar */
        body.light #logoContainer {
            background: transparent;
            border-left: 1px solid var(--border);
        }
        body.light #logoContainer img {
            height: 38px;
            filter: none;
            opacity: 1;
        }
        /* UWE-Text-Logo: im Light-Mode etwas dunkler f√ºr besseren Kontrast */
        body.light .tb-logo-text .big,
        body.light .tb-logo-text .small { color: #1a5fa8; }

        /* ‚îÄ‚îÄ THEME TOGGLE BUTTON ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
        #themeToggle {
            width: 52px;
            height: 28px;
            border-radius: 14px;
            border: 1px solid var(--border2);
            background: var(--panel);
            cursor: pointer;
            position: relative;
            flex-shrink: 0;
            transition: background 0.25s, border-color 0.25s;
            margin-right: 2px;
            padding: 0;
            display: flex;
            align-items: center;
        }
        #themeToggle .toggle-track {
            width: 100%;
            height: 100%;
            border-radius: 14px;
            display: flex;
            align-items: center;
            padding: 0 4px;
            justify-content: space-between;
        }
        #themeToggle .toggle-icon {
            font-size: 12px;
            line-height: 1;
            pointer-events: none;
            z-index: 1;
        }
        #themeToggle .toggle-knob {
            position: absolute;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--accent);
            top: 2px;
            left: 2px;
            transition: transform 0.25s cubic-bezier(.4,0,.2,1), background 0.25s;
            box-shadow: 0 1px 4px rgba(0,0,0,0.3);
        }
        body.light #themeToggle .toggle-knob {
            transform: translateX(24px);
            background: var(--accent);
        }
        body.light #themeToggle {
            background: #e0e7ff;
            border-color: #a5b4fc;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* ‚îÄ‚îÄ TOPBAR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
        #topbar {
            height: 52px;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 0;
            flex-shrink: 0;
            position: relative;
            z-index: 100;
        }
        .tb-logo {
            padding: 0 20px;
            border-right: 1px solid var(--border);
            height: 100%;
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }
        /* Exakte Nachbildung des Original UWE-Logos */
        .tb-logo-text {
            font-family: 'Segoe UI', 'Inter', ui-sans-serif, sans-serif;
            white-space: nowrap;
            line-height: 1;
            letter-spacing: 0.01em;
        }
        .tb-logo-text .big {
            font-size: 24px;
            font-weight: 700;
            color: #4a8fd4;
        }
        .tb-logo-text .small {
            font-size: 16px;
            font-weight: 300;
            color: #4a8fd4;
            letter-spacing: 0;
        }
        .tb-logo-text .gap {
            display: inline-block;
            width: 10px;
        }
        .tb-groups {
            display: flex;
            align-items: center;
            height: 100%;
            flex: 1;
            overflow-x: auto;
            overflow-y: hidden;
        }
        .tb-group {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 0 12px;
            height: 100%;
            border-right: 1px solid var(--border);
            flex-shrink: 0;
        }
        .tb-group-label {
            font-size: 9px;
            font-family: 'DM Mono', monospace;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-right: 4px;
        }
        .tb-btn {
            height: 30px;
            padding: 0 12px;
            background: transparent;
            border: 1px solid transparent;
            border-radius: 6px;
            color: var(--text);
            font-size: 12px;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            white-space: nowrap;
            transition: all 0.15s;
        }
        .tb-btn:hover { background: var(--panel); border-color: var(--border2); }
        .tb-btn.accent { background: var(--accent); color: #fff; border-color: var(--accent); }
        .tb-btn.accent:hover { background: #3d68e8; }
        .tb-btn.green { background: var(--green); color: #0d1a12; border-color: var(--green); }
        .tb-btn.green:hover { background: #1ab876; }

        /* cloud status pill */
        #cloudPill {
            margin-left: auto;
            margin-right: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 0 10px;
            height: 26px;
            border-radius: 13px;
            background: var(--panel);
            border: 1px solid var(--border);
            font-size: 11px;
            font-family: 'DM Mono', monospace;
            color: var(--muted2);
            transition: all 0.3s;
            flex-shrink: 0;
        }
        #cloudPill.loading { color: var(--accent); border-color: var(--accent); }
        #cloudPill.ok     { color: var(--green);  border-color: var(--green);  }
        #cloudPill.err    { color: var(--amber);  border-color: var(--amber);  }
        .cloud-dot {
            width: 6px; height: 6px;
            border-radius: 50%;
            background: currentColor;
            flex-shrink: 0;
        }

        /* logo img top right */
        #logoContainer {
            padding: 0 16px;
            height: 100%;
            display: flex;
            align-items: center;
            border-left: 1px solid var(--border);
            flex-shrink: 0;
        }
        #logoContainer img { height: 38px; width: auto; max-width: 220px; object-fit: contain; display: block; }
        /* Dark-Mode: schwarze Textteile des Logos wei√ü machen */
        body:not(.light) #logoContainer img { filter: brightness(0) invert(1); }
        .logo-text-fallback { display: none; flex-direction: column; align-items: flex-end; }
        .logo-text-fallback .lh { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 16px; color: var(--accent); font-style: italic; }
        .logo-text-fallback .le { font-size: 9px; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; margin-top: 1px; }

        /* help btn */
        #helpBtn {
            width: 32px; height: 32px; margin: 0 10px;
            border-radius: 8px;
            background: var(--panel);
            border: 1px solid var(--border2);
            color: var(--muted2);
            cursor: pointer;
            font-size: 14px;
            font-weight: 700;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.15s;
            flex-shrink: 0;
        }
        #helpBtn:hover { background: var(--accent); color: #fff; border-color: var(--accent); }

        /* popup */
        .tb-popup-wrap { position: static; }
        .tb-popup {
            display: none;
            position: fixed;
            top: 58px;
            left: 0; /* overridden by JS */
            background: var(--panel);
            border: 1px solid var(--border2);
            border-radius: 10px;
            padding: 16px;
            min-width: 260px;
            z-index: 9999;
            box-shadow: 0 16px 40px rgba(0,0,0,0.6);
        }
        .tb-popup.show { display: block; }
        .tb-popup label { font-size: 11px; color: var(--muted2); display: block; margin-bottom: 5px; font-family: 'DM Mono', monospace; text-transform: uppercase; letter-spacing: .5px; }
        .tb-popup input[type=file],
        .tb-popup input[type=number] { width: 100%; background: var(--bg); border: 1px solid var(--border2); border-radius: 6px; padding: 7px 10px; color: var(--text); font-size: 13px; margin-bottom: 10px; outline: none; }
        .tb-popup input:focus { border-color: var(--accent); }
        .tb-popup .hint { font-size: 11px; color: var(--muted); margin-bottom: 8px; font-style: italic; }
        .tb-popup .cb-row { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; font-size: 12px; color: var(--muted2); }
        .tb-popup .cb-row input { width: auto; margin: 0; }
        .pop-status { font-size: 11px; color: var(--muted); margin-top: 6px; font-family: 'DM Mono', monospace; }

        /* ‚îÄ‚îÄ MAIN LAYOUT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
        #app { display: flex; flex: 1; overflow: hidden; }

        /* ‚îÄ‚îÄ LEFT SIDEBAR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
        #sidebar {
            width: 260px;
            background: var(--surface);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            overflow: hidden;
        }
        .sb-header {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border);
            flex-shrink: 0;
        }
        .sb-title { font-family: 'Syne', sans-serif; font-size: 11px; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: 1.5px; }

        .sb-section {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border);
            flex-shrink: 0;
        }
        .sb-section-label { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }

        /* color + draw row */
        .draw-row { display: flex; gap: 8px; align-items: center; }
        input[type=color].swatch {
            width: 36px; height: 36px; border: 1px solid var(--border2); border-radius: 8px; cursor: pointer; padding: 0; background: none; flex-shrink: 0;
        }
        .draw-btn {
            flex: 1;
            height: 36px;
            border-radius: 8px;
            border: 1px solid var(--border2);
            background: var(--panel);
            color: var(--text);
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .draw-btn:hover { border-color: var(--accent); color: var(--accent); }
        .draw-btn.active { background: var(--green); border-color: var(--green); color: #0d1a12; }
        .draw-hint { font-size: 10px; color: var(--muted); margin-top: 6px; font-style: italic; font-family: 'DM Mono', monospace; display: none; }

        /* bundle list */
        #bundleScroll { flex: 1; overflow-y: auto; padding: 8px; }
        #bundleScroll::-webkit-scrollbar { width: 4px; }
        #bundleScroll::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }

        .bundle-card {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 10px 12px;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: border-color 0.15s;
        }
        .bundle-card:hover { border-color: var(--border2); }
        .b-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; cursor: pointer; transition: transform 0.15s; }
        .b-dot:hover { transform: scale(1.4); }
        .b-info { flex: 1; min-width: 0; }
        .b-name { font-size: 12px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .b-meta { font-size: 10px; color: var(--muted); font-family: 'DM Mono', monospace; margin-top: 2px; }
        .b-actions { display: flex; gap: 3px; flex-shrink: 0; }
        .b-btn {
            width: 24px; height: 24px; border-radius: 5px;
            border: 1px solid var(--border2);
            background: transparent;
            color: var(--muted2);
            cursor: pointer;
            font-size: 11px;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.15s;
        }
        .b-btn:hover { border-color: var(--accent); color: var(--accent); }
        .b-btn.danger:hover { border-color: var(--red); color: var(--red); }
        .b-btn.warn:hover { border-color: var(--amber); color: var(--amber); }
        .b-btn.ok:hover { border-color: var(--green); color: var(--green); }

        /* ‚îÄ‚îÄ CANVAS AREA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
        #main {
            flex: 1;
            background: var(--bg);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        #canvas {
            cursor: crosshair;
            border-radius: 8px;
            box-shadow: 0 0 0 1px var(--border), 0 20px 60px rgba(0,0,0,0.5);
        }
        #canvasHint {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            pointer-events: none;
        }
        #canvasHint .ch-icon { font-size: 48px; opacity: 0.2; margin-bottom: 12px; }
        #canvasHint .ch-text { font-family: 'DM Mono', monospace; font-size: 12px; color: var(--muted); letter-spacing: 1px; }

        /* ‚îÄ‚îÄ RIGHT SIDEBAR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
        #patternSidebar {
            width: 340px;
            background: var(--surface);
            border-left: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            overflow: hidden;
        }
        #patternScroll { flex: 1; overflow-y: auto; padding: 8px; }
        #patternScroll::-webkit-scrollbar { width: 4px; }
        #patternScroll::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }

        /* pattern mgmt collapsed row */
        .mgmt-toggle {
            padding: 10px 16px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            user-select: none;
            transition: background 0.15s;
            flex-shrink: 0;
        }
        .mgmt-toggle:hover { background: var(--panel); }
        .mgmt-toggle-label { font-family: 'Syne', sans-serif; font-size: 11px; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: 1.5px; }
        .mgmt-toggle-icon { font-size: 10px; color: var(--muted); transition: transform 0.2s; }
        .mgmt-toggle.open .mgmt-toggle-icon { transform: rotate(90deg); }

        .mgmt-body {
            padding: 10px;
            border-bottom: 1px solid var(--border);
            display: none;
            flex-shrink: 0;
        }
        .mgmt-body.open { display: block; }
        .mgmt-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }
        .mgmt-btn {
            height: 32px;
            border-radius: 7px;
            border: 1px solid var(--border2);
            background: var(--panel);
            color: var(--text);
            font-size: 11px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
            display: flex; align-items: center; justify-content: center; gap: 5px;
        }
        .mgmt-btn:hover { background: var(--bg); border-color: var(--accent); color: var(--accent); }
        .mgmt-btn.full { grid-column: 1/-1; }
        .mgmt-btn.cloud { background: linear-gradient(135deg, rgba(79,124,255,0.15), rgba(124,92,255,0.15)); border-color: rgba(79,124,255,0.4); color: #a0b4ff; }
        .mgmt-btn.cloud:hover { background: linear-gradient(135deg, rgba(79,124,255,0.25), rgba(124,92,255,0.25)); border-color: var(--accent); }

        /* pattern group */
        .pg-section {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 8px;
            overflow: hidden;
        }
        .pg-section-header {
            padding: 10px 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            user-select: none;
            border-bottom: 1px solid var(--border);
            transition: background 0.15s;
        }
        .pg-section-header:hover { background: rgba(255,255,255,0.03); }
        .pg-section-header.default-list { border-left: 3px solid var(--accent); }
        .pg-section-header.imported-list { border-left: 3px solid var(--green); }
        .pg-section-icon { font-size: 9px; color: var(--muted); transition: transform 0.2s; flex-shrink: 0; }
        .pg-section-icon.open { transform: rotate(90deg); }
        .pg-section-name { font-size: 12px; font-weight: 500; flex: 1; }
        .pg-section-count { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--muted); }

        .pg-group {
            border: 1px solid var(--border);
            border-radius: 7px;
            margin: 8px;
            overflow: hidden;
        }
        .pg-group-header {
            padding: 8px 10px;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            user-select: none;
            background: var(--surface);
            transition: background 0.15s;
        }
        .pg-group-header:hover { background: rgba(255,255,255,0.03); }
        .pg-group-icon { font-size: 8px; color: var(--muted); transition: transform 0.2s; }
        .pg-group-icon.open { transform: rotate(90deg); }
        .pg-group-name { font-size: 11px; font-weight: 500; flex: 1; }
        .pg-group-count { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--muted); }
        .pg-group-actions { display: flex; gap: 3px; }
        .pg-group-btn {
            width: 20px; height: 20px; border-radius: 4px;
            border: 1px solid transparent;
            background: transparent;
            color: var(--muted);
            cursor: pointer;
            font-size: 10px;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.15s;
        }
        .pg-group-btn:hover { background: var(--panel); border-color: var(--border2); color: var(--text); }

        .pg-group-body { padding: 6px; display: none; }
        .pg-group-body.open { display: block; }

        .pattern-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px 10px;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: border-color 0.15s;
        }
        .pattern-card:hover { border-color: var(--border2); }
        .pattern-card.selected { border-color: var(--accent); background: rgba(79,124,255,0.08); }
        .p-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; cursor: pointer; transition: transform 0.15s; }
        .p-dot:hover { transform: scale(1.5); }
        .p-info { flex: 1; min-width: 0; }
        .p-name { font-size: 11px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .p-meta { font-size: 10px; color: var(--muted); font-family: 'DM Mono', monospace; margin-top: 1px; }
        .p-actions { display: flex; gap: 3px; }
        .p-btn {
            width: 22px; height: 22px; border-radius: 5px;
            border: 1px solid var(--border2);
            background: transparent;
            color: var(--muted2);
            cursor: pointer;
            font-size: 10px;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.15s;
        }
        .p-btn.use { background: rgba(34,208,138,0.12); border-color: rgba(34,208,138,0.3); color: var(--green); }
        .p-btn.use:hover { background: var(--green); color: #0d1a12; }
        .p-btn:hover { border-color: var(--accent); color: var(--accent); }
        .p-btn.danger:hover { border-color: var(--red); color: var(--red); }

        .pg-empty { padding: 12px; text-align: center; font-size: 11px; color: var(--muted); font-family: 'DM Mono', monospace; }

        /* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
        #overlay {
            display: none;
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(6px);
            z-index: 990;
        }
        #modal {
            display: none;
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 92%;
            max-width: 1050px;
            max-height: 90vh;
            overflow-y: auto;
            background: var(--panel);
            border: 1px solid var(--border2);
            border-radius: 14px;
            box-shadow: 0 40px 80px rgba(0,0,0,0.6);
            z-index: 1000;
            padding: 28px;
        }
        #modal::-webkit-scrollbar { width: 6px; }
        #modal::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 3px; }

        .modal-header {
            display: flex; align-items: center; justify-content: space-between;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
        }
        .modal-title { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 18px; }
        .modal-length {
            font-family: 'DM Mono', monospace;
            font-size: 20px;
            color: var(--green);
            font-weight: 500;
        }

        .modal-fields {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }
        .field-group label { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--muted2); text-transform: uppercase; letter-spacing: .5px; display: block; margin-bottom: 5px; }
        .field-group input[type=text],
        .field-group input[type=number],
        .field-group select {
            width: 100%;
            background: var(--bg);
            border: 1px solid var(--border2);
            border-radius: 7px;
            padding: 8px 12px;
            color: var(--text);
            font-size: 13px;
            font-family: 'Inter', sans-serif;
            outline: none;
            transition: border-color 0.15s;
        }
        .field-group input:focus,
        .field-group select:focus { border-color: var(--accent); }

        .wire-controls {
            display: flex; align-items: center; gap: 10px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 10px 14px;
            margin-bottom: 14px;
        }
        .wire-controls label { font-size: 11px; color: var(--muted2); font-family: 'DM Mono', monospace; }
        .wire-controls input { width: 60px; background: var(--panel); border: 1px solid var(--border2); border-radius: 6px; padding: 5px 8px; color: var(--text); font-size: 13px; outline: none; }
        .wire-controls input:focus { border-color: var(--accent); }
        .wc-btn {
            padding: 5px 12px;
            border-radius: 6px;
            border: 1px solid var(--border2);
            background: var(--panel);
            color: var(--text);
            font-size: 11px;
            cursor: pointer;
            transition: all 0.15s;
        }
        .wc-btn:hover { border-color: var(--accent); color: var(--accent); }

        /* wire table */
        #wireTable {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }
        #wireTable th {
            background: var(--bg);
            color: var(--muted2);
            font-weight: 500;
            font-family: 'DM Mono', monospace;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: .5px;
            padding: 8px 10px;
            text-align: left;
            border-bottom: 1px solid var(--border2);
        }
        #wireTable td {
            padding: 5px 4px;
            border-bottom: 1px solid var(--border);
        }
        #wireTable tr:hover td { background: rgba(255,255,255,0.02); }
        #wireTable input[type=text],
        #wireTable select {
            width: 100%;
            background: var(--surface);
            border: 1px solid transparent;
            border-radius: 5px;
            padding: 5px 8px;
            color: var(--text);
            font-size: 12px;
            font-family: 'Inter', sans-serif;
            outline: none;
            transition: border-color 0.15s;
        }
        #wireTable input[type=text]:focus,
        #wireTable select:focus { border-color: var(--accent); background: var(--bg); }
        .fill-btn {
            float: right;
            background: transparent;
            border: none;
            color: var(--accent);
            cursor: pointer;
            font-size: 10px;
            padding: 0 2px;
            opacity: 0.7;
            transition: opacity 0.15s;
        }
        .fill-btn:hover { opacity: 1; }

        .modal-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
            gap: 10px;
        }
        .modal-footer-left { display: flex; gap: 8px; }
        .modal-footer-right { display: flex; gap: 8px; }
        .mf-btn {
            height: 36px;
            padding: 0 16px;
            border-radius: 8px;
            border: 1px solid var(--border2);
            background: var(--bg);
            color: var(--text);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
            white-space: nowrap;
        }
        .mf-btn:hover { background: var(--surface); border-color: var(--border2); }
        .mf-btn.save { background: var(--green); color: #0d1a12; border-color: var(--green); min-width: 180px; }
        .mf-btn.save:hover { background: #1ab876; }
        .mf-btn.cancel:hover { border-color: var(--red); color: var(--red); }

        /* group selector */
        #patternGroupSelector { display: none; margin-bottom: 14px; }


        .toast {
            padding: 10px 18px;
            border-radius: 8px;
            font-size: 13px;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            box-shadow: 0 8px 24px rgba(0,0,0,0.4);
            animation: toastIn 0.2s ease;
            pointer-events: auto;
            white-space: nowrap;
            border: 1px solid;
        }
        .toast.ok  { background: #0d2e1a; border-color: var(--green); color: var(--green); }
        .toast.err { background: #2e0d12; border-color: var(--red);   color: #ff8096; }
        .toast.warn{ background: #2e220d; border-color: var(--amber); color: var(--amber); }
        .toast.info{ background: var(--panel); border-color: var(--accent); color: #a0b4ff; }
        @keyframes toastIn  { from { opacity:0; transform: translateY(10px); } to { opacity:1; transform: translateY(0); } }
        @keyframes toastOut { from { opacity:1; } to { opacity:0; } }
        @keyframes pulse { 0%,100% { box-shadow: 0 0 0 0 rgba(34,208,138,0.5); } 50% { box-shadow: 0 0 0 6px rgba(34,208,138,0); } }
        /* scrollbar global */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 3px; }

        /* empty state */
        .no-bundles { padding: 20px 12px; text-align: center; }
        .no-bundles .nb-icon { font-size: 28px; opacity: 0.2; margin-bottom: 8px; }
        .no-bundles .nb-text { font-size: 11px; color: var(--muted); font-family: 'DM Mono', monospace; }
    </style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     TOP BAR
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="topbar">
    <div class="tb-logo">
        <div class="tb-logo-text">
            <span class="big">U</span><span class="small">niversal</span><span class="gap"></span><span class="big">W</span><span class="small">iring</span><span class="gap"></span><span class="big">E</span><span class="small">ngine</span>
        </div>
    </div>

    <div class="tb-groups">
        <!-- BILD -->
        <div class="tb-group">
            <span class="tb-group-label">Bild</span>
            <div class="tb-popup-wrap">
                <button class="tb-btn" onclick="togglePopup('imgPopup', event)">üñº Laden</button>
                <div id="imgPopup" class="tb-popup">
                    <label>Bilddatei ausw√§hlen</label>
                    <input type="file" id="upload" accept="image/*">
                    <div class="cb-row">
                        <input type="checkbox" id="autoFitCheckbox" checked onchange="toggleAutoFit()">
                        <span>Auto-Anpassung ans Fenster</span>
                    </div>
                    <div id="imageStatus" class="pop-status">Keine Datei ausgew√§hlt</div>
                </div>
            </div>
        </div>

        <!-- MA√üSTAB -->
        <div class="tb-group">
            <span class="tb-group-label">Ma√üstab</span>
            <div class="tb-popup-wrap">
                <button class="tb-btn" onclick="togglePopup('scalePopup', event)">üìè Festlegen</button>
                <div id="scalePopup" class="tb-popup">
                    <div class="hint">Klicken Sie zwei Punkte auf eine bekannte L√§nge</div>
                    <label>L√§nge in mm</label>
                    <input type="number" id="realLength" placeholder="z.B. 500" value="0">
                    <button class="tb-btn accent" style="width:100%; justify-content:center;" onclick="setMode('scale')" id="btnScale">Ma√üstab festlegen</button>
                    <button class="tb-btn green" id="btnConfirmScale" onclick="confirmScale()" style="display:none; width:100%; justify-content:center; margin-top:6px; animation: pulse 1s ease-in-out infinite;">‚úì Ma√üstab best√§tigen</button>
                    <div id="scaleLockedHint" style="display:none; margin-top:8px; font-size:11px; color:var(--amber); font-family:'DM Mono',monospace; text-align:center;">üîí Fenster gesperrt bis best√§tigt</div>
                </div>
            </div>
        </div>

        <!-- DATEI -->
        <div class="tb-group">
            <span class="tb-group-label">Datei</span>
            <button class="tb-btn accent" onclick="saveProjectJSON()">üíæ Speichern</button>
            <button class="tb-btn" onclick="document.getElementById('loadProject').click()">üìÇ Laden</button>
            <input type="file" id="loadProject" style="display:none" accept=".json" onchange="loadProjectJSON(event)">
        </div>

        <!-- EXPORT -->
        <div class="tb-group">
            <span class="tb-group-label">Export</span>
            <button class="tb-btn green" onclick="exportWustec()">üìä Wustec CSV</button>
            <button class="tb-btn" onclick="exportVisual()">üñº PDF Doku</button>
        </div>

        <!-- MUSTER -->
        <div class="tb-group">
            <span class="tb-group-label">Muster</span>
            <button class="tb-btn" onclick="exportPatterns()">üì§ Export</button>
            <button class="tb-btn" onclick="document.getElementById('importPatterns').click()">üì• Import</button>
            <input type="file" id="importPatterns" style="display:none" accept=".json" onchange="importPatterns(event)">
        </div>
    </div>

    <!-- Cloud Status Pill -->
    <div id="cloudPill">
        <div class="cloud-dot"></div>
        <span id="cloudPillText">cloud</span>
    </div>

    <!-- Theme Toggle -->
    <button id="themeToggle" onclick="toggleTheme()" title="Hell / Dunkel umschalten">
        <div class="toggle-track">
            <span class="toggle-icon">‚òÄÔ∏è</span>
            <span class="toggle-icon">üåô</span>
        </div>
        <div class="toggle-knob"></div>
    </button>

    <!-- Help -->
    <button id="helpBtn" onclick="openHelpWindow()">?</button>

    <!-- Logo -->
    <div id="logoContainer">
        <img id="logoImg" src="data:image/png;base64,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" alt="HUNDT ELEKTROSYSTEME">
        <div id="logoTextFallback" class="logo-text-fallback" style="display:none">
            <span class="lh">HUNDT</span>
            <span class="le">Elektrosysteme</span>
        </div>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     APP BODY
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="app">

    <!-- LEFT: STRAND LIST -->
    <div id="sidebar">
        <div class="sb-header">
            <div class="sb-title">Kabelstr√§nge</div>
        </div>

        <div class="sb-section">
            <div class="sb-section-label">Farbe & Zeichnen</div>
            <div class="draw-row">
                <input type="color" class="swatch" id="drawColor" value="#f5a623">
                <button class="draw-btn" onclick="setMode('measure')" id="btnMeasure" disabled>
                    <span>‚úè</span> <span id="btnMeasureLabel">Strang zeichnen</span>
                </button>
            </div>
            <div class="draw-hint" id="drawHint">‚åÅ Doppelklick beendet das Zeichnen</div>
        </div>

        <div id="bundleScroll">
            <div class="no-bundles" id="noBundles">
                <div class="nb-icon">‚åÅ</div>
                <div class="nb-text">Noch keine Str√§nge</div>
            </div>
            <div id="bundleContainer"></div>
        </div>
    </div>

    <!-- CENTER: CANVAS -->
    <div id="main">
        <div id="canvasHint">
            <div class="ch-icon">üñº</div>
            <div class="ch-text">Bild laden um zu beginnen</div>
        </div>
        <canvas id="canvas"></canvas>
    </div>

    <!-- RIGHT: PATTERNS -->
    <div id="patternSidebar">
        <div class="sb-header">
            <div class="sb-title">Muster-Bibliothek</div>
        </div>

        <!-- Management -->
        <div class="mgmt-toggle" id="mgmtToggle" onclick="toggleMgmt()">
            <span class="mgmt-toggle-label">Verwaltung</span>
            <span class="mgmt-toggle-icon">‚ñ∂</span>
        </div>
        <div class="mgmt-body" id="mgmtBody">
            <div class="mgmt-grid">
                <button class="mgmt-btn" onclick="openPatternModal()">+ Muster</button>
                <button class="mgmt-btn" onclick="createPatternGroup()">+ Gruppe</button>
                <button class="mgmt-btn" onclick="deletePatternGroupFromList()">Gruppe l√∂schen</button>
                <button class="mgmt-btn" onclick="reloadFromCloud()">‚òÅ Neu laden</button>
                <button class="mgmt-btn full cloud" onclick="saveDefaultPatternsToFile()">‚òÅ Standard-Muster in Cloud speichern</button>
            </div>
        </div>

        <div id="patternScroll">
            <!-- dynamically filled -->
        </div>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     MODAL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="overlay" onclick="closeModal()"></div>
<div id="modal">
    <div class="modal-header">
        <div class="modal-title" id="modalHeaderTitle">Kabelstrang Details</div>
        <div class="modal-length" id="currentLengthDisplay"></div>
    </div>

    <div class="modal-fields">
        <div class="field-group"><label>Strang-Name</label><input type="text" id="bundleName"></div>
        <div class="field-group"><label>Zuschlag Vorn (mm)</label><input type="number" id="plusStart" value="150"></div>
        <div class="field-group"><label>Zuschlag Hinten (mm)</label><input type="number" id="plusEnd" value="150"></div>
    </div>

    <div id="patternGroupSelector">
        <div class="field-group">
            <label>Gruppe</label>
            <select id="patternGroupSelect"></select>
        </div>
    </div>

    <div class="wire-controls">
        <label>Adern:</label>
        <input type="number" id="wireCount" value="1" min="1">
        <button class="wc-btn" onclick="updateWireTable()">Tabelle erzeugen</button>
        <button class="wc-btn" onclick="addWireRows()">+ Zeile</button>
        <button class="wc-btn" onclick="removeLastWireRow()">- Zeile</button>
    </div>

    <table id="wireTable">
        <thead>
            <tr>
                <th style="width:32px">#</th>
                <th>Typ <button class="fill-btn" onclick="autoFill('wire-type',false)">‚ñº</button></th>
                <th>Farbe <button class="fill-btn" onclick="autoFill('wire-color',false)">‚ñº</button></th>
                <th>mm¬≤ <button class="fill-btn" onclick="autoFill('wire-cross',false)">‚ñº</button></th>
                <th>Quelle <button class="fill-btn" onclick="autoFill('wire-label-s',true)">‚ñº+</button></th>
                <th>Ziel <button class="fill-btn" onclick="autoFill('wire-label-e',true)">‚ñº+</button></th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <div class="modal-footer">
        <div class="modal-footer-left"></div>
        <div class="modal-footer-right">
            <button class="mf-btn cancel" onclick="closeModal()">Abbrechen</button>
            <button class="mf-btn save" onclick="saveCableBundle()">üíæ Kabelstrang speichern</button>
        </div>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     JAVASCRIPT
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  EMBEDDED DEFAULT PATTERNS (125 Muster, immer verf√ºgbar)
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const DEFAULT_PATTERNS = {"patterns":[{"name":"1F.. - X1","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F1","e":"X1:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F2","e":"X1:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F3","e":"X1:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F4","e":"X1:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F5","e":"X1:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F6","e":"X1:6"}],"groupId":"g1"},{"name":"2F.. - X2","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F1","e":"X2:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F2","e":"X2:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F3","e":"X2:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F4","e":"X2:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F5","e":"X2:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F6","e":"X2:6"}]},{"name":"3F.. - X3","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F1","e":"X3:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F2","e":"X3:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F3","e":"X3:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F4","e":"X3:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F5","e":"X3:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F6","e":"X3:6"}]},{"name":"4F.. - X4","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F1","e":"X4:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F2","e":"X4:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F3","e":"X4:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F4","e":"X4:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F5","e":"X4:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F6","e":"X4:6"}]},{"name":"5F.. - X5","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F1","e":"X5:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F2","e":"X5:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F3","e":"X5:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F4","e":"X5:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F5","e":"X5:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F6","e":"X5:6"}]},{"name":"6F.. - X6","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F1","e":"X6:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F2","e":"X6:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F3","e":"X6:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F4","e":"X6:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F5","e":"X6:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F6","e":"X6:6"}]},{"name":"7F.. - X7","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F1","e":"X7:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F2","e":"X7:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F3","e":"X7:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F4","e":"X7:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F5","e":"X7:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F6","e":"X7:6"}]},{"name":"8F.. - X8","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F1","e":"X8:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F2","e":"X8:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F3","e":"X8:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F4","e":"X8:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F5","e":"X8:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F6","e":"X8:6"}]},{"name":"9F.. - X9","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F1","e":"X9:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F2","e":"X9:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F3","e":"X9:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F4","e":"X9:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F5","e":"X9:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F6","e":"X9:6"}]},{"name":"10F.. - X10","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F1","e":"X10:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F2","e":"X10:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F3","e":"X10:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F4","e":"X10:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F5","e":"X10:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F6","e":"X10:6"}]},{"name":"11F.. - X11","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F1","e":"X11:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F2","e":"X11:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F3","e":"X11:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F4","e":"X11:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F5","e":"X11:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F6","e":"X11:6"}]},{"name":"12F.. - X12","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F1","e":"X12:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F2","e":"X12:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F3","e":"X12:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F4","e":"X12:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F5","e":"X12:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F6","e":"X12:6"}]},{"name":"13F.. - X13","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F1","e":"X13:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F2","e":"X13:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F3","e":"X13:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F4","e":"X13:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F5","e":"X13:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F6","e":"X13:6"}]},{"name":"14F.. - X14","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F1","e":"X14:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F2","e":"X14:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F3","e":"X14:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F4","e":"X14:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F5","e":"X14:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F6","e":"X14:6"}]},{"name":"15F.. - X15","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F1","e":"X15:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F2","e":"X15:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F3","e":"X15:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F4","e":"X15:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F5","e":"X15:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F6","e":"X15:6"}]},{"name":"16F.. - X16","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F1","e":"X16:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F2","e":"X16:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F3","e":"X16:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F4","e":"X16:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F5","e":"X16:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F6","e":"X16:6"}]},{"name":"17F.. - X17","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F1","e":"X17:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F2","e":"X17:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F3","e":"X17:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F4","e":"X17:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F5","e":"X17:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F6","e":"X17:6"}]},{"name":"18F.. - X18","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F1","e":"X18:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F2","e":"X18:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F3","e":"X18:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F4","e":"X18:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F5","e":"X18:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F6","e":"X18:6"}]},{"name":"19F.. - X19","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F1","e":"X19:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F2","e":"X19:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F3","e":"X19:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F4","e":"X19:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F5","e":"X19:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F6","e":"X19:6"}]},{"name":"20F.. - X20","color":"#3b82f6","len":0,"pS":100,"pE":100,"path":[],"groupId":"g1","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F1","e":"X20:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F2","e":"X20:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F3","e":"X20:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F4","e":"X20:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F5","e":"X20:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F6","e":"X20:6"}]},{"name":"1F.. - X1","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F1:L1","e":"X1:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F1:L2","e":"X1:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F1:L3","e":"X1:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F2:L1","e":"X1:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F2:L2","e":"X1:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F2:L3","e":"X1:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F3:L1","e":"X1:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F3:L2","e":"X1:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F3:L3","e":"X1:9"}],"groupId":"g2"},{"name":"2F.. - X2","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F1:L1","e":"X2:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F1:L2","e":"X2:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F1:L3","e":"X2:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F2:L1","e":"X2:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F2:L2","e":"X2:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F2:L3","e":"X2:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F3:L1","e":"X2:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F3:L2","e":"X2:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F3:L3","e":"X2:9"}]},{"name":"3F.. - X3","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F1:L1","e":"X3:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F1:L2","e":"X3:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F1:L3","e":"X3:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F2:L1","e":"X3:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F2:L2","e":"X3:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F2:L3","e":"X3:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F3:L1","e":"X3:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F3:L2","e":"X3:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F3:L3","e":"X3:9"}]},{"name":"4F.. - X4","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F1:L1","e":"X4:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F1:L2","e":"X4:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F1:L3","e":"X4:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F2:L1","e":"X4:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F2:L2","e":"X4:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F2:L3","e":"X4:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F3:L1","e":"X4:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F3:L2","e":"X4:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F3:L3","e":"X4:9"}]},{"name":"5F.. - X5","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F1:L1","e":"X5:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F1:L2","e":"X5:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F1:L3","e":"X5:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F2:L1","e":"X5:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F2:L2","e":"X5:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F2:L3","e":"X5:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F3:L1","e":"X5:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F3:L2","e":"X5:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F3:L3","e":"X5:9"}]},{"name":"6F.. - X6","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F1:L1","e":"X6:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F1:L2","e":"X6:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F1:L3","e":"X6:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F2:L1","e":"X6:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F2:L2","e":"X6:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F2:L3","e":"X6:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F3:L1","e":"X6:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F3:L2","e":"X6:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F3:L3","e":"X6:9"}]},{"name":"7F.. - X7","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F1:L1","e":"X7:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F1:L2","e":"X7:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F1:L3","e":"X7:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F2:L1","e":"X7:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F2:L2","e":"X7:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F2:L3","e":"X7:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F3:L1","e":"X7:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F3:L2","e":"X7:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F3:L3","e":"X7:9"}]},{"name":"8F.. - X8","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F1:L1","e":"X8:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F1:L2","e":"X8:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F1:L3","e":"X8:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F2:L1","e":"X8:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F2:L2","e":"X8:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F2:L3","e":"X8:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F3:L1","e":"X8:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F3:L2","e":"X8:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F3:L3","e":"X8:9"}]},{"name":"9F.. - X9","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F1:L1","e":"X9:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F1:L2","e":"X9:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F1:L3","e":"X9:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F2:L1","e":"X9:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F2:L2","e":"X9:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F2:L3","e":"X9:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F3:L1","e":"X9:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F3:L2","e":"X9:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F3:L3","e":"X9:9"}]},{"name":"10F.. - X10","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F1:L1","e":"X10:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F1:L2","e":"X10:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F1:L3","e":"X10:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F2:L1","e":"X10:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F2:L2","e":"X10:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F2:L3","e":"X10:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F3:L1","e":"X10:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F3:L2","e":"X10:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F3:L3","e":"X10:9"}]},{"name":"11F.. - X11","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F1:L1","e":"X11:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F1:L2","e":"X11:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F1:L3","e":"X11:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F2:L1","e":"X11:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F2:L2","e":"X11:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F2:L3","e":"X11:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F3:L1","e":"X11:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F3:L2","e":"X11:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F3:L3","e":"X11:9"}]},{"name":"12F.. - X12","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F1:L1","e":"X12:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F1:L2","e":"X12:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F1:L3","e":"X12:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F2:L1","e":"X12:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F2:L2","e":"X12:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F2:L3","e":"X12:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F3:L1","e":"X12:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F3:L2","e":"X12:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F3:L3","e":"X12:9"}]},{"name":"13F.. - X13","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F1:L1","e":"X13:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F1:L2","e":"X13:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F1:L3","e":"X13:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F2:L1","e":"X13:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F2:L2","e":"X13:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F2:L3","e":"X13:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F3:L1","e":"X13:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F3:L2","e":"X13:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F3:L3","e":"X13:9"}]},{"name":"14F.. - X14","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F1:L1","e":"X14:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F1:L2","e":"X14:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F1:L3","e":"X14:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F2:L1","e":"X14:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F2:L2","e":"X14:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F2:L3","e":"X14:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F3:L1","e":"X14:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F3:L2","e":"X14:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F3:L3","e":"X14:9"}]},{"name":"15F.. - X15","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F1:L1","e":"X15:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F1:L2","e":"X15:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F1:L3","e":"X15:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F2:L1","e":"X15:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F2:L2","e":"X15:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F2:L3","e":"X15:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F3:L1","e":"X15:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F3:L2","e":"X15:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F3:L3","e":"X15:9"}]},{"name":"16F.. - X16","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F1:L1","e":"X16:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F1:L2","e":"X16:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F1:L3","e":"X16:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F2:L1","e":"X16:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F2:L2","e":"X16:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F2:L3","e":"X16:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F3:L1","e":"X16:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F3:L2","e":"X16:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F3:L3","e":"X16:9"}]},{"name":"17F.. - X17","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F1:L1","e":"X17:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F1:L2","e":"X17:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F1:L3","e":"X17:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F2:L1","e":"X17:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F2:L2","e":"X17:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F2:L3","e":"X17:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F3:L1","e":"X17:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F3:L2","e":"X17:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F3:L3","e":"X17:9"}]},{"name":"18F.. - X18","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F1:L1","e":"X18:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F1:L2","e":"X18:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F1:L3","e":"X18:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F2:L1","e":"X18:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F2:L2","e":"X18:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F2:L3","e":"X18:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F3:L1","e":"X18:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F3:L2","e":"X18:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F3:L3","e":"X18:9"}]},{"name":"19F.. - X19","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F1:L1","e":"X19:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F1:L2","e":"X19:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F1:L3","e":"X19:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F2:L1","e":"X19:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F2:L2","e":"X19:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F2:L3","e":"X19:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F3:L1","e":"X19:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F3:L2","e":"X19:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F3:L3","e":"X19:9"}]},{"name":"20F.. - X20","color":"#10b981","len":0,"pS":150,"pE":150,"path":[],"groupId":"g2","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F1:L1","e":"X20:1"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F1:L2","e":"X20:2"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F1:L3","e":"X20:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F2:L1","e":"X20:4"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F2:L2","e":"X20:5"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F2:L3","e":"X20:6"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F3:L1","e":"X20:7"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F3:L2","e":"X20:8"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F3:L3","e":"X20:9"}]},{"name":"1FI/LS - X1","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F1:L","e":"X1:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"1F1:N","e":"X1:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F2:L","e":"X1:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"1F2:N","e":"X1:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F3:L","e":"X1:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"1F3:N","e":"X1:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F4:L","e":"X1:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"1F4:N","e":"X1:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F5:L","e":"X1:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"1F5:N","e":"X1:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"1F6:L","e":"X1:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"1F6:N","e":"X1:N"}]},{"name":"2FI/LS - X2","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F1:L","e":"X2:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"2F1:N","e":"X2:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F2:L","e":"X2:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"2F2:N","e":"X2:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F3:L","e":"X2:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"2F3:N","e":"X2:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F4:L","e":"X2:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"2F4:N","e":"X2:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F5:L","e":"X2:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"2F5:N","e":"X2:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"2F6:L","e":"X2:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"2F6:N","e":"X2:N"}]},{"name":"3FI/LS - X3","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F1:L","e":"X3:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"3F1:N","e":"X3:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F2:L","e":"X3:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"3F2:N","e":"X3:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F3:L","e":"X3:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"3F3:N","e":"X3:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F4:L","e":"X3:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"3F4:N","e":"X3:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F5:L","e":"X3:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"3F5:N","e":"X3:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"3F6:L","e":"X3:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"3F6:N","e":"X3:N"}]},{"name":"4FI/LS - X4","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F1:L","e":"X4:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"4F1:N","e":"X4:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F2:L","e":"X4:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"4F2:N","e":"X4:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F3:L","e":"X4:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"4F3:N","e":"X4:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F4:L","e":"X4:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"4F4:N","e":"X4:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F5:L","e":"X4:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"4F5:N","e":"X4:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"4F6:L","e":"X4:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"4F6:N","e":"X4:N"}]},{"name":"5FI/LS - X5","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F1:L","e":"X5:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"5F1:N","e":"X5:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F2:L","e":"X5:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"5F2:N","e":"X5:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F3:L","e":"X5:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"5F3:N","e":"X5:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F4:L","e":"X5:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"5F4:N","e":"X5:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F5:L","e":"X5:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"5F5:N","e":"X5:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"5F6:L","e":"X5:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"5F6:N","e":"X5:N"}]},{"name":"6FI/LS - X6","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F1:L","e":"X6:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"6F1:N","e":"X6:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F2:L","e":"X6:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"6F2:N","e":"X6:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F3:L","e":"X6:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"6F3:N","e":"X6:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F4:L","e":"X6:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"6F4:N","e":"X6:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F5:L","e":"X6:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"6F5:N","e":"X6:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"6F6:L","e":"X6:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"6F6:N","e":"X6:N"}]},{"name":"7FI/LS - X7","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F1:L","e":"X7:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"7F1:N","e":"X7:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F2:L","e":"X7:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"7F2:N","e":"X7:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F3:L","e":"X7:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"7F3:N","e":"X7:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F4:L","e":"X7:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"7F4:N","e":"X7:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F5:L","e":"X7:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"7F5:N","e":"X7:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"7F6:L","e":"X7:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"7F6:N","e":"X7:N"}]},{"name":"8FI/LS - X8","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F1:L","e":"X8:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"8F1:N","e":"X8:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F2:L","e":"X8:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"8F2:N","e":"X8:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F3:L","e":"X8:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"8F3:N","e":"X8:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F4:L","e":"X8:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"8F4:N","e":"X8:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F5:L","e":"X8:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"8F5:N","e":"X8:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"8F6:L","e":"X8:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"8F6:N","e":"X8:N"}]},{"name":"9FI/LS - X9","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F1:L","e":"X9:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"9F1:N","e":"X9:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F2:L","e":"X9:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"9F2:N","e":"X9:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F3:L","e":"X9:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"9F3:N","e":"X9:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F4:L","e":"X9:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"9F4:N","e":"X9:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F5:L","e":"X9:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"9F5:N","e":"X9:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"9F6:L","e":"X9:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"9F6:N","e":"X9:N"}]},{"name":"10FI/LS - X10","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F1:L","e":"X10:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"10F1:N","e":"X10:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F2:L","e":"X10:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"10F2:N","e":"X10:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F3:L","e":"X10:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"10F3:N","e":"X10:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F4:L","e":"X10:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"10F4:N","e":"X10:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F5:L","e":"X10:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"10F5:N","e":"X10:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"10F6:L","e":"X10:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"10F6:N","e":"X10:N"}]},{"name":"11FI/LS - X11","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F1:L","e":"X11:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"11F1:N","e":"X11:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F2:L","e":"X11:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"11F2:N","e":"X11:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F3:L","e":"X11:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"11F3:N","e":"X11:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F4:L","e":"X11:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"11F4:N","e":"X11:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F5:L","e":"X11:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"11F5:N","e":"X11:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"11F6:L","e":"X11:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"11F6:N","e":"X11:N"}]},{"name":"12FI/LS - X12","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F1:L","e":"X12:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"12F1:N","e":"X12:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F2:L","e":"X12:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"12F2:N","e":"X12:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F3:L","e":"X12:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"12F3:N","e":"X12:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F4:L","e":"X12:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"12F4:N","e":"X12:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F5:L","e":"X12:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"12F5:N","e":"X12:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"12F6:L","e":"X12:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"12F6:N","e":"X12:N"}]},{"name":"13FI/LS - X13","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F1:L","e":"X13:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"13F1:N","e":"X13:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F2:L","e":"X13:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"13F2:N","e":"X13:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F3:L","e":"X13:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"13F3:N","e":"X13:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F4:L","e":"X13:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"13F4:N","e":"X13:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F5:L","e":"X13:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"13F5:N","e":"X13:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"13F6:L","e":"X13:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"13F6:N","e":"X13:N"}]},{"name":"14FI/LS - X14","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F1:L","e":"X14:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"14F1:N","e":"X14:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F2:L","e":"X14:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"14F2:N","e":"X14:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F3:L","e":"X14:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"14F3:N","e":"X14:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F4:L","e":"X14:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"14F4:N","e":"X14:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F5:L","e":"X14:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"14F5:N","e":"X14:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"14F6:L","e":"X14:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"14F6:N","e":"X14:N"}]},{"name":"15FI/LS - X15","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F1:L","e":"X15:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"15F1:N","e":"X15:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F2:L","e":"X15:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"15F2:N","e":"X15:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F3:L","e":"X15:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"15F3:N","e":"X15:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F4:L","e":"X15:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"15F4:N","e":"X15:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F5:L","e":"X15:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"15F5:N","e":"X15:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"15F6:L","e":"X15:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"15F6:N","e":"X15:N"}]},{"name":"16FI/LS - X16","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F1:L","e":"X16:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"16F1:N","e":"X16:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F2:L","e":"X16:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"16F2:N","e":"X16:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F3:L","e":"X16:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"16F3:N","e":"X16:3"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F4:L","e":"X16:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"16F4:N","e":"X16:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F5:L","e":"X16:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"16F5:N","e":"X16:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"16F6:L","e":"X16:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"16F6:N","e":"X16:N"}]},{"name":"17FI/LS - X17","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F1:L","e":"X17:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"17F1:N","e":"X17:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F2:L","e":"X17:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"17F2:N","e":"X17:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F3:L","e":"X17:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"17F3:N","e":"X17:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F4:L","e":"X17:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"17F4:N","e":"X17:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F5:L","e":"X17:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"17F5:N","e":"X17:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"17F6:L","e":"X17:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"17F6:N","e":"X17:N"}]},{"name":"18FI/LS - X18","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F1:L","e":"X18:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"18F1:N","e":"X18:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F2:L","e":"X18:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"18F2:N","e":"X18:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F3:L","e":"X18:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"18F3:N","e":"X18:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F4:L","e":"X18:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"18F4:N","e":"X18:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F5:L","e":"X18:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"18F5:N","e":"X18:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"18F6:L","e":"X18:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"18F6:N","e":"X18:N"}]},{"name":"19FI/LS - X19","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F1:L","e":"X19:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"19F1:N","e":"X19:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F2:L","e":"X19:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"19F2:N","e":"X19:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F3:L","e":"X19:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"19F3:N","e":"X19:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F4:L","e":"X19:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"19F4:N","e":"X19:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F5:L","e":"X19:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"19F5:N","e":"X19:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"19F6:L","e":"X19:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"19F6:N","e":"X19:N"}]},{"name":"20FI/LS - X20","color":"#f59e0b","len":0,"pS":100,"pE":100,"path":[],"groupId":"g3","wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F1:L","e":"X20:1"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"20F1:N","e":"X20:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F2:L","e":"X20:2"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"20F2:N","e":"X20:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F3:L","e":"X20:3"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"20F3:N","e":"X20:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F4:L","e":"X20:4"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"20F4:N","e":"X20:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F5:L","e":"X20:5"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"20F5:N","e":"X20:N"},{"t":"H07V-K","c":"bk","cr":"2.5","s":"20F6:L","e":"X20:6"},{"t":"H07V-K","c":"bl","cr":"2.5","s":"20F6:N","e":"X20:N"}]},{"name":"F1-FI1","color":"#8b5cf6","len":679.487112288949,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"F1/L1","e":"FI1/L1"},{"t":"H07V-K","c":"bk","cr":"6","s":"F1/L2","e":"FI1/L2"},{"t":"H07V-K","c":"bk","cr":"6","s":"F1/L3","e":"FI1/L3"},{"t":"H07V-K","c":"bl","cr":"6","s":"F1/N","e":"FI1/N"}],"groupId":"group_1768309474371"},{"name":"F2-FI2","color":"#8b5cf6","len":679.487112288949,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"F2/L1","e":"FI2/L1"},{"t":"H07V-K","c":"bk","cr":"6","s":"F2/L2","e":"FI2/L2"},{"t":"H07V-K","c":"bk","cr":"6","s":"F2/L3","e":"FI2/L3"},{"t":"H07V-K","c":"bl","cr":"6","s":"F2/N","e":"FI2/N"}],"groupId":"group_1768309474371"},{"name":"F3 - FI3","color":"#8b5cf6","len":679.487112288949,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"F3/L1","e":"FI3/L1"},{"t":"H07V-K","c":"bk","cr":"6","s":"F3/L2","e":"FI3/L2"},{"t":"H07V-K","c":"bk","cr":"6","s":"F3/L3","e":"FI3/L3"},{"t":"H07V-K","c":"bl","cr":"6","s":"F3/N","e":"FI3/N"}],"groupId":"group_1768309474371"},{"name":"F4-FI4","color":"#8b5cf6","len":679.487112288949,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"F4/L1","e":"FI4/L1"},{"t":"H07V-K","c":"bk","cr":"6","s":"F4/L2","e":"FI4/L2"},{"t":"H07V-K","c":"bk","cr":"6","s":"F4/L3","e":"FI4/L3"},{"t":"H07V-K","c":"bl","cr":"6","s":"F4/N","e":"FI4/N"}],"groupId":"group_1768309474371"},{"name":"F5-FI5","color":"#8b5cf6","len":679.487112288949,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"F5/L1","e":"FI5/L1"},{"t":"H07V-K","c":"bk","cr":"6","s":"F5/L2","e":"FI5/L2"},{"t":"H07V-K","c":"bk","cr":"6","s":"F5/L3","e":"FI5/L3"},{"t":"H07V-K","c":"bl","cr":"6","s":"F5/N","e":"FI5/N"}],"groupId":"group_1768309474371"},{"name":"F6-FI6","color":"#8b5cf6","len":679.487112288949,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"F6/L1","e":"FI6/L1"},{"t":"H07V-K","c":"bk","cr":"6","s":"F6/L2","e":"FI6/L2"},{"t":"H07V-K","c":"bk","cr":"6","s":"F6/L3","e":"FI6/L3"},{"t":"H07V-K","c":"bl","cr":"6","s":"F6/N","e":"FI6/N"}],"groupId":"group_1768309474371"},{"name":"F7-FI7","color":"#8b5cf6","len":679.487112288949,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"F7/L1","e":"FI7/L1"},{"t":"H07V-K","c":"bk","cr":"6","s":"F7/L2","e":"FI7/L2"},{"t":"H07V-K","c":"bk","cr":"6","s":"F7/L3","e":"FI7/L3"},{"t":"H07V-K","c":"bl","cr":"6","s":"F7/N","e":"FI7/N"}],"groupId":"group_1768309474371"},{"name":"F8-FI8","color":"#8b5cf6","len":679.487112288949,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"F8/L1","e":"FI8/L1"},{"t":"H07V-K","c":"bk","cr":"6","s":"F8/L2","e":"FI8/L2"},{"t":"H07V-K","c":"bk","cr":"6","s":"F8/L3","e":"FI8/L3"},{"t":"H07V-K","c":"bl","cr":"6","s":"F8/N","e":"FI8/N"}],"groupId":"group_1768309474371"},{"name":"F9-FI9","color":"#8b5cf6","len":679.487112288949,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"F9/L1","e":"FI9/L1"},{"t":"H07V-K","c":"bk","cr":"6","s":"F9/L2","e":"FI9/L2"},{"t":"H07V-K","c":"bk","cr":"6","s":"F9/L3","e":"FI9/L3"},{"t":"H07V-K","c":"bl","cr":"6","s":"F9/N","e":"FI9/N"}],"groupId":"group_1768309474371"},{"name":"F10-FI10","color":"#8b5cf6","len":679.487112288949,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"F10/L1","e":"FI10/L1"},{"t":"H07V-K","c":"bk","cr":"6","s":"F10/L2","e":"FI10/L2"},{"t":"H07V-K","c":"bk","cr":"6","s":"F10/L3","e":"FI10/L3"},{"t":"H07V-K","c":"bl","cr":"6","s":"F10/N","e":"FI10/N"}],"groupId":"group_1768309474371"},{"name":"X\u00dcSS","color":"#ec4899","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"or","cr":"1.5","s":"","e":""},{"t":"H07V-K","c":"or","cr":"1.5","s":"","e":""},{"t":"H07V-K","c":"or","cr":"1.5","s":"","e":""}],"groupId":"group_1768546777102"},{"name":"F1 - X1","color":"#06b6d4","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768546851580"},{"name":"F2 - X2","color":"#06b6d4","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768546851580"},{"name":"F3 - X3","color":"#06b6d4","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768546851580"},{"name":"F4 - X4","color":"#06b6d4","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768546851580"},{"name":"F5 - X5","color":"#06b6d4","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768546851580"},{"name":"F6 - X6","color":"#06b6d4","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768546851580"},{"name":"F7 - X7","color":"#06b6d4","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768546851580"},{"name":"F8 - X8","color":"#06b6d4","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768546851580"},{"name":"F9 - X9","color":"#06b6d4","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768546851580"},{"name":"F10 - X10","color":"#06b6d4","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768546851580"},{"name":"F11 - X11","color":"#06b6d4","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768546851580"},{"name":"F12 - X12","color":"#06b6d4","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768546851580"},{"name":"F11 - FI11","color":"#8b5cf6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768309474371"},{"name":"F12 - FI12","color":"#8b5cf6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"6","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"6","s":"","e":""}],"groupId":"group_1768309474371"},{"name":"F1 - X1","color":"#ef4444","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547094199"},{"name":"F2 - X2","color":"#ef4444","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547094199"},{"name":"F3 - X3","color":"#ef4444","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547094199"},{"name":"F4 - X4","color":"#ef4444","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547094199"},{"name":"F5 - X5","color":"#ef4444","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547094199"},{"name":"F6 - X6","color":"#ef4444","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547094199"},{"name":"F7 - X7","color":"#ef4444","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547094199"},{"name":"F8 - X8","color":"#ef4444","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547094199"},{"name":"F9 - X9","color":"#ef4444","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547094199"},{"name":"F10 - X10","color":"#ef4444","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547094199"},{"name":"F11 - X11","color":"#ef4444","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547094199"},{"name":"F12 - X12","color":"#ef4444","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547094199"},{"name":"F1 - X1","color":"#14b8a6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547315213"},{"name":"F2 - X2","color":"#14b8a6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547315213"},{"name":"F3 - X3","color":"#14b8a6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547315213"},{"name":"F4 - X4","color":"#14b8a6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547315213"},{"name":"F5 - X5","color":"#14b8a6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547315213"},{"name":"F6 - X6","color":"#14b8a6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547315213"},{"name":"F7 - X7","color":"#14b8a6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547315213"},{"name":"F8 - X8","color":"#14b8a6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547315213"},{"name":"F9 - X9","color":"#14b8a6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547315213"},{"name":"F10 - X10","color":"#14b8a6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547315213"},{"name":"F11 - X11","color":"#14b8a6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547315213"},{"name":"F12 - X12","color":"#14b8a6","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547315213"},{"name":"1F1 - X1","color":"#f97316","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"2.5","s":"","e":""}],"groupId":"group_1768547508428"},{"name":"2F1 - X2","color":"#f97316","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"2.5","s":"","e":""}],"groupId":"group_1768547508428"},{"name":"3F1 - X3","color":"#f97316","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"2.5","s":"","e":""}],"groupId":"group_1768547508428"},{"name":"4F1 - X4","color":"#f97316","len":0,"pS":150,"pE":150,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"2.5","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"2.5","s":"","e":""}],"groupId":"group_1768547508428"},{"name":"F1 - FI1","color":"#6366f1","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547640499"},{"name":"F2  - FI2","color":"#6366f1","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547640499"},{"name":"F3 - FI3","color":"#6366f1","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547640499"},{"name":"F4 - FI4","color":"#6366f1","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547640499"},{"name":"F5 - FI5","color":"#6366f1","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547640499"},{"name":"F6 - FI6","color":"#6366f1","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547640499"},{"name":"F7 - FI7","color":"#6366f1","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547640499"},{"name":"F8 - FI8","color":"#6366f1","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547640499"},{"name":"F9 - FI9","color":"#6366f1","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547640499"},{"name":"F10 - FI10","color":"#6366f1","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547640499"},{"name":"F11 - FI11","color":"#6366f1","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547640499"},{"name":"F12 - FI12","color":"#6366f1","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"10","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"10","s":"","e":""}],"groupId":"group_1768547640499"},{"name":"F1 - FI1","color":"#84cc16","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547788012"},{"name":"F2 - FI2","color":"#84cc16","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547788012"},{"name":"F3 - FI3","color":"#84cc16","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547788012"},{"name":"F4 - FI4","color":"#84cc16","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547788012"},{"name":"F5 - FI5","color":"#84cc16","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547788012"},{"name":"F6 - Fi6","color":"#84cc16","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547788012"},{"name":"F7 - FI7","color":"#84cc16","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547788012"},{"name":"F8 - FI8","color":"#84cc16","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547788012"},{"name":"F9 - FI9","color":"#84cc16","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547788012"},{"name":"F10 - Fi10","color":"#84cc16","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547788012"},{"name":"F11 - FI11","color":"#84cc16","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547788012"},{"name":"F12 - FI12","color":"#84cc16","len":0,"pS":150,"pE":50,"path":[],"wires":[{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bk","cr":"16","s":"","e":""},{"t":"H07V-K","c":"bl","cr":"16","s":"","e":""}],"groupId":"group_1768547788012"}],"groups":[{"id":"g1","name":"6x LS 1pol. - Klemmen","collapsed":false},{"id":"g2","name":"3x LS 3pol. - Klemmen","collapsed":false},{"id":"g3","name":"6xFI/LS - Klemmen","collapsed":false},{"id":"group_1768309474371","name":"D02 6mm\u00b2  auf FI oder LS","collapsed":false},{"id":"group_1768546777102","name":"Hilfskontakt \u00dcSS auf X\u00dcSS","collapsed":false},{"id":"group_1768546851580","name":"D02 6mm\u00b2 direkt auf Klemmen","collapsed":false},{"id":"group_1768547094199","name":"D02 10mm\u00b2 direkt auf Klemmen","collapsed":false},{"id":"group_1768547315213","name":"D02 16mm\u00b2 direkt auf Klemmen","collapsed":false},{"id":"group_1768547508428","name":"3x 3Poliger FI/LS auf Klemmen","collapsed":false},{"id":"group_1768547640499","name":"D02 10mm\u00b2 auf FI oder LS","collapsed":false},{"id":"group_1768547788012","name":"D02 16mm\u00b2 auf FI oder LS","collapsed":false}],"listName":"Standard-Muster"};

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  ‚ö†Ô∏è  CONFIGURATION ‚Äî replace with your deployed Apps Script URL
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxZTqz6BY1wb1_oFSv4h4CueZO1V_2X__YgtKWxaQyEh8IBhPB08RU7TGxOpW4pBfFe7A/exec";

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  STATE
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

let img = new Image(), mode = 'none', mmPerPixel = 0;
let currentPath = [], snapshot, allBundles = [];
let lastMeasuredLength = 0, mouseX = 0, mouseY = 0;
let originalImageSnapshot = null, editIndex = -1;
let zoom = 1, panX = 0, panY = 0, isPanning = false, lastPanPoint = {x:0,y:0};
let patternBundles = [], defaultPatternBundles = [];
let selectedPatternIndex = -1, isPatternMode = false, patternListName = '';
let isDefaultPatternList = false;
let patternGroups = [], defaultPatternGroups = [];
let collapsedGroups = {};
let defaultPatternListCollapsed = true, patternManagementCollapsed = true;
let defaultPatternWarningShownThisSession = false;
let autoFitToWindow = true;
let imageScale = 1, imageOffsetX = 0, imageOffsetY = 0;

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  CLOUD STATUS
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function setCloudStatus(state, text) {
    const pill = document.getElementById('cloudPill');
    const label = document.getElementById('cloudPillText');
    pill.className = 'loading ok err'.split(' ').reduce((c,s) => c.replace(s,''), pill.className).trim();
    if (state) pill.classList.add(state);
    label.textContent = text;
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  POPUP MANAGEMENT
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function scaleAwaitingConfirm() {
    const btn = document.getElementById('btnConfirmScale');
    return btn && btn.style.display !== 'none';
}

function togglePopup(id, event) {
    if (event) event.stopPropagation();

    // Ma√üstab-Popup ist gesperrt solange Best√§tigung aussteht
    if (id === 'scalePopup' && scaleAwaitingConfirm()) return;

    const popup = document.getElementById(id);
    const isOpen = popup.classList.contains('show');

    // Alle anderen schlie√üen (au√üer gesperrtes scalePopup)
    document.querySelectorAll('.tb-popup').forEach(p => {
        if (p.id === 'scalePopup' && scaleAwaitingConfirm()) return;
        p.classList.remove('show');
    });

    if (!isOpen) {
        const btn = event ? (event.currentTarget || event.target.closest('button') || event.target) : null;
        if (btn) {
            const rect = btn.getBoundingClientRect();
            const popupWidth = 280;
            let left = rect.left;
            if (left + popupWidth > window.innerWidth - 12) left = window.innerWidth - popupWidth - 12;
            popup.style.left = left + 'px';
        }
        popup.classList.add('show');
    }
}

document.addEventListener('click', e => {
    if (!e.target.closest('.tb-popup') && !e.target.closest('[onclick*="togglePopup"]')) {
        document.querySelectorAll('.tb-popup').forEach(p => {
            // scalePopup nur schlie√üen wenn Best√§tigung NICHT aussteht
            if (p.id === 'scalePopup' && scaleAwaitingConfirm()) return;
            p.classList.remove('show');
        });
    }
});

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  MANAGEMENT TOGGLE
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function toggleMgmt() {
    const body = document.getElementById('mgmtBody');
    const toggle = document.getElementById('mgmtToggle');
    body.classList.toggle('open');
    toggle.classList.toggle('open');
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  IMAGE / CANVAS
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
document.getElementById('upload').onchange = e => {
    loadMainImage(e.target.files[0]);
    const s = document.getElementById('imageStatus');
    if (s && e.target.files[0]) { s.textContent = '‚úì ' + e.target.files[0].name; s.style.color = 'var(--green)'; }
};

function resizeCanvas() {
    const main = document.getElementById('main');
    canvas.width = main.clientWidth;
    canvas.height = main.clientHeight;
    if (img.complete && img.width > 0 && autoFitToWindow) { calculateImageScale(); rebuildDrawing(); }
}

function calculateImageScale() {
    if (!img.complete || img.width === 0) return;
    const main = document.getElementById('main');
    const sx = main.clientWidth / img.width, sy = main.clientHeight / img.height;
    imageScale = Math.min(sx, sy) * 0.95;
    imageOffsetX = (main.clientWidth - img.width * imageScale) / 2;
    imageOffsetY = (main.clientHeight - img.height * imageScale) / 2;
}

function toggleAutoFit() {
    autoFitToWindow = document.getElementById('autoFitCheckbox').checked;
    if (img.complete && img.width > 0) {
        if (autoFitToWindow) { resizeCanvas(); }
        else { canvas.width = img.width; canvas.height = img.height; imageScale=1; imageOffsetX=0; imageOffsetY=0; zoom=1; panX=0; panY=0; rebuildDrawing(); }
    }
}

function loadMainImage(file) {
    if (!file) return;
    const reader = new FileReader();
    reader.onerror = () => alert("Fehler beim Laden!");
    reader.onload = f => {
        img.onload = () => {
            document.getElementById('canvasHint').style.display = 'none';
            if (autoFitToWindow) resizeCanvas();
            else { canvas.width = img.width; canvas.height = img.height; imageScale=1; imageOffsetX=0; imageOffsetY=0; }
            zoom=1; panX=0; panY=0;
            originalImageSnapshot = ctx.getImageData(0,0,canvas.width,canvas.height);
            rebuildDrawing();
        };
        img.onerror = () => alert("Bild konnte nicht geladen werden!");
        img.src = f.target.result;
    };
    reader.readAsDataURL(file);
}

window.addEventListener('resize', () => { if (img.complete && img.width > 0 && autoFitToWindow) resizeCanvas(); });

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  DRAW MODES
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function setMode(m) {
    mode = m; currentPath = [];
    if (m === 'measure' && !isPatternMode) { isPatternMode = false; selectedPatternIndex = -1; }
    const hint = document.getElementById('drawHint');
    if (m === 'measure') { hint.style.display = 'block'; } else { hint.style.display = 'none'; }
    rebuildDrawing();
}

function getPos(e) {
    const rect = canvas.getBoundingClientRect();
    const sx = canvas.width / rect.width, sy = canvas.height / rect.height;
    const cx = (e.clientX - rect.left) * sx, cy = (e.clientY - rect.top) * sy;
    ctx.save();
    ctx.setTransform(1,0,0,1,0,0);
    ctx.translate(panX*zoom, panY*zoom);
    ctx.scale(zoom, zoom);
    if (autoFitToWindow) { ctx.translate(imageOffsetX/zoom, imageOffsetY/zoom); ctx.scale(imageScale, imageScale); }
    const matrix = ctx.getTransform(); ctx.restore();
    const det = matrix.a*matrix.d - matrix.b*matrix.c;
    if (Math.abs(det) < 0.0001) {
        if (autoFitToWindow) return { x:(cx-imageOffsetX-panX*zoom)/(imageScale*zoom), y:(cy-imageOffsetY-panY*zoom)/(imageScale*zoom) };
        return { x:cx/zoom-panX, y:cy/zoom-panY };
    }
    return {
        x:(matrix.d*(cx-matrix.e)-matrix.c*(cy-matrix.f))/det,
        y:(matrix.a*(cy-matrix.f)-matrix.b*(cx-matrix.e))/det
    };
}

canvas.onmousemove = e => {
    if (isPanning) {
        const rect = canvas.getBoundingClientRect();
        const sx = canvas.width/rect.width, sy = canvas.height/rect.height;
        panX += ((e.clientX-rect.left)-lastPanPoint.x)*sx/zoom;
        panY += ((e.clientY-rect.top)-lastPanPoint.y)*sy/zoom;
        lastPanPoint = {x:e.clientX-rect.left, y:e.clientY-rect.top};
        rebuildDrawing();
        if (mode !== 'none' && currentPath.length > 0) redrawCanvas();
        return;
    }
    const pos = getPos(e); mouseX=pos.x; mouseY=pos.y;
    if (mode !== 'none' && currentPath.length > 0) redrawCanvas();
};

function redrawCanvas() {
    ctx.save(); ctx.setTransform(1,0,0,1,0,0); ctx.clearRect(0,0,canvas.width,canvas.height); ctx.restore();
    ctx.save();
    ctx.translate(panX*zoom, panY*zoom); ctx.scale(zoom, zoom);
    if (autoFitToWindow) { ctx.translate(imageOffsetX/zoom, imageOffsetY/zoom); ctx.scale(imageScale, imageScale); }
    if (img.complete && img.width > 0) ctx.drawImage(img, 0, 0);
    allBundles.forEach(b => {
        if (!b.path || b.path.length === 0) return;
        ctx.strokeStyle = b.color;
        ctx.lineWidth = autoFitToWindow ? Math.max(4,canvas.width/500)/(zoom*imageScale) : Math.max(4,canvas.width/500)/zoom;
        ctx.lineJoin = 'round'; ctx.lineCap = 'round';
        ctx.beginPath(); ctx.moveTo(b.path[0].x, b.path[0].y);
        b.path.forEach(p => ctx.lineTo(p.x, p.y)); ctx.stroke();
    });
    ctx.lineWidth = autoFitToWindow ? Math.max(4,canvas.width/500)/(zoom*imageScale) : Math.max(4,canvas.width/500)/zoom;
    ctx.lineJoin='round'; ctx.lineCap='round';
    ctx.strokeStyle = (mode==='scale') ? '#ff4f6a' : document.getElementById('drawColor').value;
    if (currentPath.length > 0) {
        ctx.beginPath(); ctx.moveTo(currentPath[0].x, currentPath[0].y);
        currentPath.forEach(p => ctx.lineTo(p.x, p.y));
        ctx.lineTo(mouseX, mouseY); ctx.stroke();
    }
    ctx.restore();
}

canvas.onclick = e => {
    if (e.button === 1) return;
    if (mode === 'none') return;
    currentPath.push(getPos(e));
    updateSnapshot();
    if (mode === 'scale' && currentPath.length === 2) {
        document.getElementById('btnConfirmScale').style.display = 'block';
        document.getElementById('scaleLockedHint').style.display = 'block';
        // Popup √∂ffnen falls es zu war
        const popup = document.getElementById('scalePopup');
        if (!popup.classList.contains('show')) {
            const btn = document.querySelector('[onclick*="scalePopup"]');
            if (btn) { const r = btn.getBoundingClientRect(); popup.style.left = r.left + 'px'; }
            popup.classList.add('show');
        }
        mode = 'none';
    }
};

function updateSnapshot() {
    ctx.save(); ctx.setTransform(1,0,0,1,0,0); ctx.clearRect(0,0,canvas.width,canvas.height); ctx.restore();
    ctx.save();
    ctx.translate(panX*zoom,panY*zoom); ctx.scale(zoom,zoom);
    if (autoFitToWindow) { ctx.translate(imageOffsetX/zoom,imageOffsetY/zoom); ctx.scale(imageScale,imageScale); }
    if (img.complete && img.width>0) ctx.drawImage(img,0,0);
    allBundles.forEach(b => {
        if (!b.path||b.path.length===0) return;
        ctx.strokeStyle=b.color;
        ctx.lineWidth=autoFitToWindow?Math.max(4,canvas.width/500)/(zoom*imageScale):Math.max(4,canvas.width/500)/zoom;
        ctx.lineJoin='round'; ctx.lineCap='round';
        ctx.beginPath(); ctx.moveTo(b.path[0].x,b.path[0].y);
        b.path.forEach(p=>ctx.lineTo(p.x,p.y)); ctx.stroke();
    });
    if (currentPath.length>0) {
        ctx.lineWidth=autoFitToWindow?Math.max(4,canvas.width/500)/(zoom*imageScale):Math.max(4,canvas.width/500)/zoom;
        ctx.lineJoin='round'; ctx.lineCap='round';
        ctx.strokeStyle=(mode==='scale')?'#ff4f6a':document.getElementById('drawColor').value;
        ctx.beginPath(); ctx.moveTo(currentPath[0].x,currentPath[0].y);
        for (let i=1;i<currentPath.length;i++) ctx.lineTo(currentPath[i].x,currentPath[i].y);
        ctx.stroke();
    }
    ctx.restore();
    snapshot = ctx.getImageData(0,0,canvas.width,canvas.height);
}

canvas.onwheel = e => {
    e.preventDefault();
    const rect = canvas.getBoundingClientRect();
    const sx = canvas.width/rect.width, sy = canvas.height/rect.height;
    const mx = (e.clientX-rect.left)*sx, my = (e.clientY-rect.top)*sy;
    const factor = e.deltaY>0?0.9:1.1;
    const newZoom = Math.max(0.1, Math.min(5, zoom*factor));
    let ipx,ipy;
    if (autoFitToWindow) { ipx=(mx-imageOffsetX-panX*zoom)/(imageScale*zoom); ipy=(my-imageOffsetY-panY*zoom)/(imageScale*zoom); }
    else { ipx=mx/zoom-panX; ipy=my/zoom-panY; }
    zoom=newZoom;
    if (autoFitToWindow) { panX=(mx-imageOffsetX-ipx*imageScale*zoom)/zoom; panY=(my-imageOffsetY-ipy*imageScale*zoom)/zoom; }
    else { panX=mx/zoom-ipx; panY=my/zoom-ipy; }
    rebuildDrawing();
    // Aktuelle Zeichenlinie nach dem Zoom sofort wieder rendern
    if (mode !== 'none' && currentPath.length > 0) redrawCanvas();
};

canvas.onmousedown = e => {
    if (e.button===1) { e.preventDefault(); isPanning=true; const r=canvas.getBoundingClientRect(); lastPanPoint={x:e.clientX-r.left,y:e.clientY-r.top}; canvas.style.cursor='grabbing'; }
};
canvas.onmouseup = e => { if(e.button===1){isPanning=false;canvas.style.cursor='crosshair';} };
canvas.onmouseleave = () => { isPanning=false; canvas.style.cursor='crosshair'; };

function confirmScale() {
    if (currentPath.length<2) { alert("Bitte zwei Punkte setzen!"); return; }
    const rl = parseFloat(document.getElementById('realLength').value);
    if (!rl||rl<=0) { alert("Bitte eine g√ºltige L√§nge eingeben!"); return; }
    const d = Math.sqrt(Math.pow(currentPath[1].x-currentPath[0].x,2)+Math.pow(currentPath[1].y-currentPath[0].y,2));
    if (d===0) { alert("Punkte sind identisch!"); return; }
    mmPerPixel = rl/d;
    document.getElementById('btnMeasure').disabled=false;
    document.getElementById('btnConfirmScale').style.display='none';
    document.getElementById('scaleLockedHint').style.display='none';
    document.getElementById('scalePopup').classList.remove('show');
    showToast(`‚úì Ma√üstab gesetzt: 1px = ${mmPerPixel.toFixed(4)}mm`, 'ok');
    rebuildDrawing();
}

function rebuildDrawing() {
    if (!img.complete||img.width===0) return;
    ctx.save(); ctx.setTransform(1,0,0,1,0,0); ctx.clearRect(0,0,canvas.width,canvas.height); ctx.restore();
    ctx.save();
    ctx.translate(panX*zoom,panY*zoom); ctx.scale(zoom,zoom);
    if (autoFitToWindow) { ctx.translate(imageOffsetX/zoom,imageOffsetY/zoom); ctx.scale(imageScale,imageScale); }
    ctx.drawImage(img,0,0);
    allBundles.forEach(b => {
        if (!b.path||b.path.length===0) return;
        ctx.strokeStyle=b.color;
        ctx.lineWidth=autoFitToWindow?Math.max(4,canvas.width/500)/(zoom*imageScale):Math.max(4,canvas.width/500)/zoom;
        ctx.lineJoin='round'; ctx.lineCap='round';
        ctx.beginPath(); ctx.moveTo(b.path[0].x,b.path[0].y);
        b.path.forEach(p=>ctx.lineTo(p.x,p.y)); ctx.stroke();
    });
    ctx.restore();
    snapshot=ctx.getImageData(0,0,canvas.width,canvas.height);
}

canvas.ondblclick = () => {
    if (mode==='measure'&&currentPath.length>1) {
        let px=0;
        for(let i=1;i<currentPath.length;i++) px+=Math.sqrt(Math.pow(currentPath[i].x-currentPath[i-1].x,2)+Math.pow(currentPath[i].y-currentPath[i-1].y,2));
        lastMeasuredLength=px*mmPerPixel;
        if (isPatternMode&&selectedPatternIndex>=0) { document.getElementById('modal').style.display='block'; document.getElementById('overlay').style.display='block'; }
        else if (editIndex===-1) openModal();
        else openModal();
    }
};

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  MODAL ARROW KEY NAVIGATION
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function getAllInputFields() {
    const fields={header:[],table:[]};
    fields.header.push(document.getElementById('bundleName'));
    fields.header.push(document.getElementById('plusStart'));
    fields.header.push(document.getElementById('plusEnd'));
    const pgs=document.getElementById('patternGroupSelect');
    if(pgs&&pgs.offsetParent!==null) fields.header.push(pgs);
    fields.header.push(document.getElementById('wireCount'));
    const rows=document.querySelectorAll('#wireTable tbody tr');
    rows.forEach(row=>{
        fields.table.push({
            type:row.querySelector('.wire-type'),color:row.querySelector('.wire-color'),
            cross:row.querySelector('.wire-cross'),source:row.querySelector('.wire-label-s'),end:row.querySelector('.wire-label-e')
        });
    });
    return fields;
}

function handleModalArrowKeys(e) {
    const modal=document.getElementById('modal');
    if(!modal||modal.style.display==='none'||modal.style.display==='') return;
    if(!['ArrowLeft','ArrowRight','ArrowUp','ArrowDown'].includes(e.key)) return;
    const ae=document.activeElement; if(!ae) return;
    const wt=document.getElementById('wireTable'); if(!wt) return;
    const tbody=wt.querySelector('tbody'); if(!tbody) return;
    const activeTr=ae.closest('tr');
    const isInTable=activeTr&&tbody.contains(activeTr);
    if(!isInTable) {
        if(ae.tagName==='INPUT'&&ae.type==='text'){const s=ae.selectionStart,en=ae.selectionEnd,v=ae.value;if(e.key==='ArrowLeft'&&s>0)return;if(e.key==='ArrowRight'&&en<v.length)return;}
        else if(ae.tagName==='SELECT')return;
        e.preventDefault(); e.stopPropagation();
        const allF=[];const fi=getAllInputFields();
        fi.header.forEach(f=>{if(f)allF.push(f);});
        fi.table.forEach(r=>{['type','color','cross','source','end'].forEach(k=>{if(r[k])allF.push(r[k]);});});
        const ci=allF.indexOf(ae);if(ci===-1){if(allF.length>0)allF[0].focus();return;}
        let ni=ci;
        if(e.key==='ArrowRight'||e.key==='ArrowDown')ni=(ci+1)%allF.length;
        else ni=(ci-1+allF.length)%allF.length;
        allF[ni].focus();
        if(allF[ni].tagName==='INPUT'&&allF[ni].type==='text'){allF[ni].setSelectionRange(allF[ni].value.length,allF[ni].value.length);}
        return;
    }
    const rows=wt.querySelectorAll('tbody tr');const colOrder=['type','color','cross','source','end'];
    let cri=-1,cci=-1;
    const cTr=ae.closest('tr');
    if(cTr&&tbody.contains(cTr)){
        for(let ri=0;ri<rows.length;ri++){
            if(rows[ri]===cTr){
                cri=ri;
                const rf={type:cTr.querySelector('.wire-type'),color:cTr.querySelector('.wire-color'),cross:cTr.querySelector('.wire-cross'),source:cTr.querySelector('.wire-label-s'),end:cTr.querySelector('.wire-label-e')};
                for(let ci2=0;ci2<colOrder.length;ci2++){if(rf[colOrder[ci2]]===ae){cci=ci2;break;}}
                break;
            }
        }
    }
    if(cri===-1||cci===-1){for(let ri=0;ri<rows.length;ri++){const r=rows[ri];const rf={type:r.querySelector('.wire-type'),color:r.querySelector('.wire-color'),cross:r.querySelector('.wire-cross'),source:r.querySelector('.wire-label-s'),end:r.querySelector('.wire-label-e')};for(let ci2=0;ci2<colOrder.length;ci2++){if(rf[colOrder[ci2]]===ae){cri=ri;cci=ci2;break;}}if(cri!==-1&&cci!==-1)break;}}
    if(cri===-1||cci===-1)return;
    if(e.key==='ArrowUp'||e.key==='ArrowDown'){
        e.preventDefault(); e.stopPropagation();
        const nri=e.key==='ArrowDown'?cri+1:cri-1;
        if(nri<0||nri>=rows.length)return;
        const nr=rows[nri];const nrf={type:nr.querySelector('.wire-type'),color:nr.querySelector('.wire-color'),cross:nr.querySelector('.wire-cross'),source:nr.querySelector('.wire-label-s'),end:nr.querySelector('.wire-label-e')};
        const nf=nrf[colOrder[cci]];
        if(nf){nf.focus();setTimeout(()=>{nf.focus();if(nf.tagName==='INPUT'&&nf.type==='text'){const l=nf.value?nf.value.length:0;nf.setSelectionRange(l,l);}},10);}
        return;
    }
    if(e.key==='ArrowLeft'||e.key==='ArrowRight'){
        let shouldNav=true;
        if(ae.tagName==='INPUT'&&ae.type==='text'){const s=ae.selectionStart,en=ae.selectionEnd,v=ae.value;if(e.key==='ArrowLeft'&&s>0)shouldNav=false;if(e.key==='ArrowRight'&&en<v.length)shouldNav=false;}
        if(!shouldNav)return;
        e.preventDefault(); e.stopPropagation();
        let nci2=cci,nri2=cri;
        if(e.key==='ArrowRight'){nci2=cci+1;if(nci2>=colOrder.length){if(cri+1<rows.length){nri2=cri+1;nci2=0;}else return;}}
        else{nci2=cci-1;if(nci2<0){if(cri-1>=0){nri2=cri-1;nci2=colOrder.length-1;}else return;}}
        const nr2=rows[nri2];const nrf2={type:nr2.querySelector('.wire-type'),color:nr2.querySelector('.wire-color'),cross:nr2.querySelector('.wire-cross'),source:nr2.querySelector('.wire-label-s'),end:nr2.querySelector('.wire-label-e')};
        const nf2=nrf2[colOrder[nci2]];
        if(nf2){nf2.focus();setTimeout(()=>{nf2.focus();if(nf2.tagName==='INPUT'&&nf2.type==='text'){const l=nf2.value?nf2.value.length:0;nf2.setSelectionRange(l,l);}},10);}
        return;
    }
}
document.addEventListener('keydown', handleModalArrowKeys, true);

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  MODAL OPEN / CLOSE
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function openModal() {
    document.getElementById('modal').style.display='block';
    document.getElementById('overlay').style.display='block';
    if(!isPatternMode) document.getElementById('patternGroupSelector').style.display='none';
    if(isPatternMode&&selectedPatternIndex>=0) return;
    if(editIndex===-1){
        document.getElementById('bundleName').value='X'+(allBundles.length+1);
        updateWireTable();
    } else {
        const b=allBundles[editIndex];
        document.getElementById('bundleName').value=b.name;
        document.getElementById('plusStart').value=b.pS;
        document.getElementById('plusEnd').value=b.pE;
        document.getElementById('wireCount').value=b.wires.length;
        updateWireTable(b.wires);
    }
    document.getElementById('currentLengthDisplay').textContent = lastMeasuredLength ? Math.round(lastMeasuredLength)+'mm' : '';
}

function closeModal() {
    document.getElementById('modal').style.display='none';
    document.getElementById('overlay').style.display='none';
    if(editIndex!==-1&&mode==='measure'){snapshot=ctx.getImageData(0,0,canvas.width,canvas.height);}
    else {
        currentPath=[]; editIndex=-1; mode='none';
        isPatternMode=false; selectedPatternIndex=-1;
        document.getElementById('btnMeasure').classList.remove('active');
        document.getElementById('btnMeasureLabel').textContent='Strang zeichnen';
        document.getElementById('drawHint').style.display='none';
        rebuildDrawing();
    }
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  WIRE TABLE
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function makeColorOptions(selected) {
    const colors=[['bk','Schwarz (bk)'],['bl','Blau (bl)'],['dbl','Dunkelblau (dbl)'],['dblws','Dbl-Wei√ü (dblws)'],['br','Braun (br)'],['gnge','Gr√ºn-Gelb (gnge)'],['rt','Rot (rt)'],['gr','Grau (gr)'],['or','Orange (or)'],['ws','Wei√ü (ws)'],['wsbk','Wei√ü-Schwarz (wsbk)']];
    return colors.map(([v,l])=>`<option value="${v}" ${v===selected?'selected':''}>${l}</option>`).join('');
}

function makeRow(i, w) {
    return `<tr>
        <td style="text-align:center;color:var(--muted);font-family:'DM Mono',monospace;font-size:11px;">${i}</td>
        <td><input type="text" class="wire-type" value="${(w.t||'H07V-K').replace(/"/g,'&quot;')}"></td>
        <td><select class="wire-color">${makeColorOptions(w.c||'bk')}</select></td>
        <td><input type="text" class="wire-cross" value="${(w.cr||'1.5').replace(/"/g,'&quot;')}"></td>
        <td><input type="text" class="wire-label-s" value="${(w.s||'').replace(/"/g,'&quot;')}" placeholder="z.B. F1"></td>
        <td><input type="text" class="wire-label-e" value="${(w.e||'').replace(/"/g,'&quot;')}" placeholder="z.B. X1.1"></td>
    </tr>`;
}

function updateWireTable(existingWires=null) {
    const count=parseInt(document.getElementById('wireCount').value)||1;
    const tbody=document.querySelector('#wireTable tbody');
    tbody.innerHTML='';
    for(let i=1;i<=count;i++){
        const w=existingWires?existingWires[i-1]:{t:'H07V-K',c:'bk',cr:'1.5',s:'',e:''};
        tbody.innerHTML+=makeRow(i,w);
    }
}

function addWireRows() {
    const tbody=document.querySelector('#wireTable tbody');
    const n=tbody.querySelectorAll('tr').length+1;
    const tr=document.createElement('tr');
    tr.innerHTML=makeRow(n,{t:'H07V-K',c:'bk',cr:'1.5',s:'',e:''}).replace(/<tr>/,'').replace(/<\/tr>/,'');
    const temp=document.createElement('tbody');
    temp.innerHTML=makeRow(n,{t:'H07V-K',c:'bk',cr:'1.5',s:'',e:''});
    tbody.appendChild(temp.firstChild);
    updateRowNumbers();
    document.getElementById('wireCount').value=tbody.querySelectorAll('tr').length;
}

function removeLastWireRow() {
    const tbody=document.querySelector('#wireTable tbody');
    const rows=tbody.querySelectorAll('tr');
    if(rows.length<=1){alert("Mindestens eine Zeile!");return;}
    rows[rows.length-1].remove();
    updateRowNumbers();
    document.getElementById('wireCount').value=tbody.querySelectorAll('tr').length;
}

function updateRowNumbers() {
    document.querySelectorAll('#wireTable tbody tr').forEach((r,i)=>{
        const c=r.querySelector('td:first-child');
        if(c)c.textContent=i+1;
    });
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  SAVE CABLE BUNDLE
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function saveCableBundle() {
    const bundleName=document.getElementById('bundleName').value.trim();
    if(!bundleName){alert("Bitte einen Namen eingeben!");return;}
    if(!isPatternMode&&editIndex===-1&&currentPath.length<2){alert("Bitte einen Pfad zeichnen!");return;}
    const pathToUse=currentPath.length>0?[...currentPath]:(editIndex===-1?[]:(allBundles[editIndex]?.path||[]));
    if(!isPatternMode&&pathToUse.length<2){alert("Pfad braucht mindestens 2 Punkte!");return;}
    
    const b={
        name:bundleName,
        color:editIndex===-1?document.getElementById('drawColor').value:allBundles[editIndex].color,
        len:lastMeasuredLength,
        pS:parseFloat(document.getElementById('plusStart').value)||0,
        pE:parseFloat(document.getElementById('plusEnd').value)||0,
        path:pathToUse,
        wires:[]
    };
    
    document.querySelectorAll('#wireTable tbody tr').forEach(r=>{
        b.wires.push({
            t:r.querySelector('.wire-type')?.value.trim()||'',
            c:r.querySelector('.wire-color')?.value||'bk',
            cr:r.querySelector('.wire-cross')?.value.trim()||'',
            s:r.querySelector('.wire-label-s')?.value.trim()||'',
            e:r.querySelector('.wire-label-e')?.value.trim()||''
        });
    });
    
    if(isPatternMode&&selectedPatternIndex>=0) {
        if(pathToUse.length>=2) {
            allBundles.push(b);
        } else {
            const pb={...b,path:[]};
            const selGroupId=document.getElementById('patternGroupSelect')?.value;
            if(selGroupId) {
                pb.groupId=selGroupId;
            } else {
                const ex=isDefaultPatternList?defaultPatternBundles[selectedPatternIndex]:patternBundles[selectedPatternIndex];
                if(ex?.groupId) pb.groupId=ex.groupId;
            }
            if(isDefaultPatternList) {
                defaultPatternBundles[selectedPatternIndex]=pb;
                showToast('Standard-Muster ge√§ndert ‚Äî bitte in Cloud speichern!', 'info');
            } else patternBundles[selectedPatternIndex]=pb;
            updatePatternList();
            isPatternMode=false; selectedPatternIndex=-1; editIndex=-1; mode='none';
            document.getElementById('btnMeasure').classList.remove('active');
            document.getElementById('btnMeasureLabel').textContent='Strang zeichnen';
            document.getElementById('drawHint').style.display='none';
            updateSidebarList(); rebuildDrawing(); closeModal(); return;
        }
    } else if(isPatternMode&&selectedPatternIndex===-1) {
        const pb={...b,path:[]};
        const selGroupId=document.getElementById('patternGroupSelect')?.value;
        if(selGroupId)pb.groupId=selGroupId;
        else if(patternGroups.length>0)pb.groupId=patternGroups[0].id;
        patternBundles.push(pb);
        updatePatternList();
        isPatternMode=false; selectedPatternIndex=-1; editIndex=-1; mode='none';
        document.getElementById('btnMeasure').classList.remove('active');
        document.getElementById('btnMeasureLabel').textContent='Strang zeichnen';
        document.getElementById('drawHint').style.display='none';
        updateSidebarList(); rebuildDrawing(); closeModal(); return;
    } else {
        if(editIndex===-1)allBundles.push(b);else allBundles[editIndex]=b;
    }
    
    editIndex=-1; mode='none'; isPatternMode=false; selectedPatternIndex=-1;
    document.getElementById('btnMeasure').classList.remove('active');
    document.getElementById('btnMeasureLabel').textContent='Strang zeichnen';
    document.getElementById('drawHint').style.display='none';
    updateSidebarList(); rebuildDrawing(); closeModal();
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  SIDEBAR LIST
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function updateSidebarList() {
    const container=document.getElementById('bundleContainer');
    const noBundles=document.getElementById('noBundles');
    noBundles.style.display=allBundles.length===0?'block':'none';
    container.innerHTML='';
    allBundles.forEach((b,i)=>{
        const wc=b.wires?b.wires.length:0;
        const len=b.len?Math.round(b.len):0;
        const div=document.createElement('div');
        div.className='bundle-card';
        div.innerHTML=`
            <div class="b-dot" style="background:${b.color}" onclick="changeBundleColor(${i})" title="Farbe √§ndern"></div>
            <div class="b-info">
                <div class="b-name">${b.name}</div>
                <div class="b-meta">${wc} Ader${wc!==1?'(n)':''} ¬∑ ${len}mm</div>
            </div>
            <div class="b-actions">
                <button class="b-btn ok" onclick="duplicateBundle(${i})" title="Duplizieren">üìã</button>
                <button class="b-btn" onclick="editBundle(${i})" title="Bearbeiten">‚úé</button>
                <button class="b-btn warn" onclick="redrawBundle(${i})" title="Neu zeichnen">‚Üª</button>
                <button class="b-btn danger" onclick="deleteBundle(${i})" title="L√∂schen">‚úï</button>
            </div>`;
        container.appendChild(div);
    });
}

function changeBundleColor(i) {
    const inp=document.createElement('input'); inp.type='color'; inp.value=allBundles[i].color;
    inp.onchange=e=>{allBundles[i].color=e.target.value;updateSidebarList();rebuildDrawing();};
    inp.click();
}
function changeDefaultPatternColor(i){const inp=document.createElement('input');inp.type='color';inp.value=defaultPatternBundles[i].color||'#f5a623';inp.onchange=e=>{defaultPatternBundles[i].color=e.target.value;updatePatternList();};inp.click();}
function changePatternColor(i){const inp=document.createElement('input');inp.type='color';inp.value=patternBundles[i].color||'#f5a623';inp.onchange=e=>{patternBundles[i].color=e.target.value;updatePatternList();};inp.click();}

function editBundle(i){editIndex=i;lastMeasuredLength=allBundles[i].len;openModal();}
function redrawBundle(i){
    if(!mmPerPixel){alert("Bitte zuerst Ma√üstab festlegen!");return;}
    editIndex=i;
    document.getElementById('drawColor').value=allBundles[i].color;
    currentPath=[]; mode='measure';
    document.getElementById('btnMeasure').classList.add('active');
    document.getElementById('btnMeasureLabel').textContent='‚Üª '+allBundles[i].name;
    document.getElementById('drawHint').style.display='block';
    rebuildDrawing(); snapshot=ctx.getImageData(0,0,canvas.width,canvas.height);
}
function duplicateBundle(i){
    const b=allBundles[i];
    const dup={name:b.name+' (Kopie)',color:b.color,len:b.len||0,pS:b.pS||0,pE:b.pE||0,path:b.path?[...b.path]:[],wires:b.wires?b.wires.map(w=>({...w})):[]};
    allBundles.push(dup); updateSidebarList(); rebuildDrawing();
    editIndex=allBundles.length-1; lastMeasuredLength=dup.len;
    document.getElementById('bundleName').value=dup.name;
    document.getElementById('drawColor').value=dup.color;
    document.getElementById('plusStart').value=dup.pS;
    document.getElementById('plusEnd').value=dup.pE;
    const tbody=document.querySelector('#wireTable tbody'); tbody.innerHTML='';
    dup.wires.forEach((w,idx)=>tbody.innerHTML+=makeRow(idx+1,w));
    document.getElementById('wireCount').value=dup.wires.length;
    openModal();
}
function deleteBundle(i){if(confirm("L√∂schen?")){allBundles.splice(i,1);updateSidebarList();rebuildDrawing();}}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  PATTERN LIST
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function makePatternCard(p, globalIndex, isDefault) {
    const wc=p.wires?p.wires.length:0;
    const selected=selectedPatternIndex===globalIndex;
    const colorFn=isDefault?`changeDefaultPatternColor(${globalIndex})`:`changePatternColor(${globalIndex})`;
    const selectFn=isDefault?`selectDefaultPattern(${globalIndex})`:`selectPattern(${globalIndex})`;
    const dupFn=isDefault?`duplicateDefaultPattern(${globalIndex})`:`duplicatePattern(${globalIndex})`;
    const editFn=isDefault?`editDefaultPattern(${globalIndex})`:`editPattern(${globalIndex})`;
    const delFn=isDefault?`deleteDefaultPattern(${globalIndex})`:`deletePattern(${globalIndex})`;
    return `<div class="pattern-card ${selected?'selected':''}">
        <div class="p-dot" style="background:${p.color||'#f5a623'}" onclick="${colorFn}" title="Farbe"></div>
        <div class="p-info">
            <div class="p-name">${p.name}</div>
            <div class="p-meta">${wc} Ader${wc!==1?'(n)':''} ¬∑ ${p.pS||0}+${p.pE||0}mm</div>
        </div>
        <div class="p-actions">
            <button class="p-btn use" onclick="${selectFn}" title="Ausw√§hlen & zeichnen">‚úì</button>
            <button class="p-btn" onclick="${dupFn}" title="Duplizieren">üìã</button>
            <button class="p-btn" onclick="${editFn}" title="Bearbeiten">‚úé</button>
            <button class="p-btn danger" onclick="${delFn}" title="L√∂schen">‚úï</button>
        </div>
    </div>`;
}

function updatePatternList() {
    const container=document.getElementById('patternScroll');
    let html='';
    
    if(defaultPatternBundles.length>0||defaultPatternGroups.length>0) {
        const open=!defaultPatternListCollapsed;
        html+=`<div class="pg-section">
            <div class="pg-section-header default-list" onclick="toggleDefaultPatternList()">
                <span class="pg-section-icon ${open?'open':''}">‚ñ∂</span>
                <span class="pg-section-name">Standard-Muster</span>
                <span class="pg-section-count">${defaultPatternBundles.length}</span>
            </div>
            ${open?`<div style="padding:6px;">
                ${defaultPatternGroups.length===0?'<div class="pg-empty">Keine Gruppen</div>':
                defaultPatternGroups.map(g=>{
                    const isCollapsed=collapsedGroups[g.id]!==undefined?collapsedGroups[g.id]:true;
                    const gp=defaultPatternBundles.filter(p=>p.groupId===g.id);
                    return `<div class="pg-group">
                        <div class="pg-group-header" onclick="togglePatternGroup('${g.id}')">
                            <span class="pg-group-icon ${!isCollapsed?'open':''}">‚ñ∂</span>
                            <span class="pg-group-name">${g.name}</span>
                            <span class="pg-group-count">${gp.length}</span>
                        </div>
                        ${!isCollapsed?`<div class="pg-group-body open">
                            ${gp.length===0?'<div class="pg-empty">Leer</div>':gp.map(p=>{
                                const gi=defaultPatternBundles.findIndex(b=>b===p);
                                return makePatternCard(p,gi,true);
                            }).join('')}
                        </div>`:''}
                    </div>`;
                }).join('')}
            </div>`:''}
        </div>`;
    }
    
    if(patternBundles.length>0||patternGroups.length>0) {
        if(patternGroups.length===0&&patternBundles.length>0) {
            const gid='group_'+Date.now();
            patternGroups.push({id:gid,name:patternListName||'Importiert',collapsed:false});
            patternBundles.forEach(p=>{if(!p.groupId)p.groupId=gid;});
        }
        html+=`<div class="pg-section" style="margin-top:8px;">
            <div class="pg-section-header imported-list">
                <span class="pg-section-name">Importierte Muster</span>
                <span class="pg-section-count">${patternBundles.length}</span>
            </div>
            <div style="padding:6px;">
                ${patternGroups.map(g=>{
                    const isCollapsed=collapsedGroups[g.id]!==undefined?collapsedGroups[g.id]:true;
                    const gp=patternBundles.filter(p=>p.groupId===g.id);
                    return `<div class="pg-group">
                        <div class="pg-group-header" onclick="togglePatternGroup('${g.id}')">
                            <span class="pg-group-icon ${!isCollapsed?'open':''}">‚ñ∂</span>
                            <span class="pg-group-name">${g.name}</span>
                            <span class="pg-group-count">${gp.length}</span>
                            <div class="pg-group-actions">
                                <button class="pg-group-btn" onclick="event.stopPropagation();renamePatternGroup('${g.id}')" title="Umbenennen">‚úé</button>
                                <button class="pg-group-btn" onclick="event.stopPropagation();deletePatternGroup('${g.id}')" title="L√∂schen">‚úï</button>
                            </div>
                        </div>
                        ${!isCollapsed?`<div class="pg-group-body open">
                            ${gp.length===0?'<div class="pg-empty">Leer</div>':gp.map(p=>{
                                const gi=patternBundles.findIndex(b=>b===p);
                                return makePatternCard(p,gi,false);
                            }).join('')}
                        </div>`:''}
                    </div>`;
                }).join('')}
            </div>
        </div>`;
    }
    
    if(!html) html='<div class="pg-empty" style="margin-top:20px;">Keine Muster vorhanden</div>';
    container.innerHTML=html;
}

function togglePatternGroup(gid){collapsedGroups[gid]=!collapsedGroups[gid];updatePatternList();}
function toggleDefaultPatternList(){defaultPatternListCollapsed=!defaultPatternListCollapsed;updatePatternList();}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  PATTERN SELECT / EDIT / DELETE
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function loadPatternIntoModal(pattern, isDefault, globalIndex) {
    selectedPatternIndex=globalIndex; isPatternMode=true; isDefaultPatternList=isDefault;
    document.getElementById('bundleName').value=pattern.name;
    document.getElementById('drawColor').value=pattern.color||'#f5a623';
    document.getElementById('plusStart').value=pattern.pS||0;
    document.getElementById('plusEnd').value=pattern.pE||0;
    document.getElementById('wireCount').value=pattern.wires?pattern.wires.length:0;
    const tbody=document.querySelector('#wireTable tbody');tbody.innerHTML='';
    (pattern.wires||[]).forEach((w,idx)=>tbody.innerHTML+=makeRow(idx+1,w));
}

function selectDefaultPattern(i){
    if(!mmPerPixel){alert("Bitte zuerst Ma√üstab festlegen!");return;}
    loadPatternIntoModal(defaultPatternBundles[i],true,i);
    document.getElementById('patternGroupSelector').style.display='none';
    currentPath=[]; mode='measure'; editIndex=-1;
    document.getElementById('btnMeasure').classList.add('active');
    document.getElementById('btnMeasureLabel').textContent='Muster: '+defaultPatternBundles[i].name;
    document.getElementById('drawHint').style.display='block';
    updatePatternList(); rebuildDrawing();
}

function selectPattern(i){
    if(!mmPerPixel){alert("Bitte zuerst Ma√üstab festlegen!");return;}
    loadPatternIntoModal(patternBundles[i],false,i);
    document.getElementById('patternGroupSelector').style.display='none';
    currentPath=[]; mode='measure'; editIndex=-1;
    document.getElementById('btnMeasure').classList.add('active');
    document.getElementById('btnMeasureLabel').textContent='Muster: '+patternBundles[i].name;
    document.getElementById('drawHint').style.display='block';
    updatePatternList(); rebuildDrawing();
}

function editDefaultPattern(i){
    if(!defaultPatternWarningShownThisSession){
        if(!confirm('Standard-Muster bearbeiten?\n\nNach dem Speichern auf "‚òÅ Standard-Muster in Cloud speichern" klicken.'))return;
        defaultPatternWarningShownThisSession=true;
    }
    loadPatternIntoModal(defaultPatternBundles[i],true,i);
    // Gruppenauswahl mit den Standard-Gruppen bef√ºllen
    const sel = document.getElementById('patternGroupSelect');
    sel.innerHTML = '';
    defaultPatternGroups.forEach(g => {
        const o = document.createElement('option');
        o.value = g.id; o.textContent = g.name;
        sel.appendChild(o);
    });
    // Aktuelle Gruppe vorausw√§hlen
    if(defaultPatternBundles[i].groupId) sel.value = defaultPatternBundles[i].groupId;
    document.getElementById('patternGroupSelector').style.display='block';
    openModal();
}

function editPattern(i){
    loadPatternIntoModal(patternBundles[i],false,i);
    updatePatternGroupSelector();
    document.getElementById('patternGroupSelector').style.display='block';
    if(patternBundles[i].groupId)document.getElementById('patternGroupSelect').value=patternBundles[i].groupId;
    openModal();
}

function deleteDefaultPattern(i){defaultPatternBundles.splice(i,1);updatePatternList();}
function deletePattern(i){if(confirm("Muster l√∂schen?")){patternBundles.splice(i,1);updatePatternList();}}

function duplicateDefaultPattern(i){
    const p=defaultPatternBundles[i];
    const dup={name:p.name+' (Kopie)',color:p.color,len:p.len||0,pS:p.pS||0,pE:p.pE||0,path:[],wires:p.wires?p.wires.map(w=>({...w})):[]};
    patternBundles.push(dup); updatePatternList();
    loadPatternIntoModal(dup,false,patternBundles.length-1);
    updatePatternGroupSelector();
    document.getElementById('patternGroupSelector').style.display='block';
    openModal();
    setTimeout(()=>{const n=document.getElementById('bundleName');if(n){n.focus();n.select();}},100);
}

function duplicatePattern(i){
    const p=patternBundles[i];
    const dup={name:p.name+' (Kopie)',color:p.color,len:p.len||0,pS:p.pS||0,pE:p.pE||0,path:[],wires:p.wires?p.wires.map(w=>({...w})):[]};
    patternBundles.push(dup); updatePatternList();
    loadPatternIntoModal(dup,false,patternBundles.length-1);
    updatePatternGroupSelector();
    document.getElementById('patternGroupSelector').style.display='block';
    if(p.groupId)document.getElementById('patternGroupSelect').value=p.groupId;
    openModal();
    setTimeout(()=>{const n=document.getElementById('bundleName');if(n){n.focus();n.select();}},100);
}

function openPatternModal(){
    selectedPatternIndex=-1; isPatternMode=true;
    document.getElementById('bundleName').value='';
    document.getElementById('drawColor').value='#f5a623';
    document.getElementById('plusStart').value=0;
    document.getElementById('plusEnd').value=0;
    document.querySelector('#wireTable tbody').innerHTML='';
    updatePatternGroupSelector();
    document.getElementById('patternGroupSelector').style.display='block';
    openModal();
}

function updatePatternGroupSelector(){
    const sel=document.getElementById('patternGroupSelect');sel.innerHTML='';
    if(patternGroups.length===0){const gid='group_'+Date.now();patternGroups.push({id:gid,name:'Neue Gruppe',collapsed:false});}
    patternGroups.forEach(g=>{const o=document.createElement('option');o.value=g.id;o.textContent=g.name;sel.appendChild(o);});
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  GROUPS
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function createPatternGroup(){
    const n=prompt("Gruppen-Name:");
    if(!n||!n.trim())return;
    patternGroups.push({id:'group_'+Date.now(),name:n.trim(),collapsed:false});
    updatePatternList();
}

function renamePatternGroup(gid){
    const g=patternGroups.find(x=>x.id===gid);if(!g)return;
    const n=prompt("Neuer Name:",g.name);
    if(n&&n.trim()){g.name=n.trim();updatePatternList();}
}

function deletePatternGroup(gid){
    const g=patternGroups.find(x=>x.id===gid);if(!g)return;
    const gp=patternBundles.filter(p=>p.groupId===gid);
    if(gp.length>0&&!confirm(`Gruppe "${g.name}" mit ${gp.length} Muster l√∂schen?`))return;
    gp.forEach(p=>{const idx=patternBundles.indexOf(p);if(idx>-1)patternBundles.splice(idx,1);});
    patternGroups.splice(patternGroups.indexOf(g),1);
    if(patternGroups.length===0)patternGroups.push({id:'group_'+Date.now(),name:'Neue Gruppe',collapsed:false});
    updatePatternList();
}

function deletePatternGroupFromList(){
    if(patternGroups.length===0){alert("Keine Gruppen vorhanden!");return;}
    let list="Gruppe ausw√§hlen:\n\n";
    patternGroups.forEach((g,i)=>{const c=patternBundles.filter(p=>p.groupId===g.id).length;list+=`${i+1}. ${g.name} (${c} Muster)\n`;});
    const sel=prompt(list+"\nNummer eingeben:");if(!sel)return;
    const si=parseInt(sel)-1;
    if(isNaN(si)||si<0||si>=patternGroups.length){alert("Ung√ºltige Auswahl!");return;}
    deletePatternGroup(patternGroups[si].id);
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  AUTOFILL
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function autoFill(cls, inc){
    const rows=document.querySelectorAll('#wireTable tbody tr');
    const val=rows[0].querySelector('.'+cls).value;
    for(let i=1;i<rows.length;i++){
        const f=rows[i].querySelector('.'+cls);
        if(inc){const m=val.match(/(\d+)$/);if(!m){f.value=val;continue;}f.value=val.substring(0,val.length-m[1].length)+(parseInt(m[1])+i).toString().padStart(m[1].length,'0');}
        else f.value=val;
    }
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  CLOUD PATTERN SYNC (JSONBin.io ‚Äî kein CORS, kein Server)
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// APPS_SCRIPT_URL wird hier nicht mehr verwendet.
// Stattdessen: JSONBIN_BIN_ID und JSONBIN_API_KEY eintragen.
// Kostenlos unter: https://jsonbin.io (Account erstellen)
//
// Nach dem Erstellen eines Bins:
//   JSONBIN_BIN_ID  = die ID aus der URL (z.B. "6657abc123...")
//   JSONBIN_API_KEY = euer Master Key aus den Account-Settings
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

const JSONBIN_BIN_ID  = "69a3f67bae596e708f54869e";   // ‚Üê eintragen
const JSONBIN_API_KEY = "$2a$10$P2Pg5NNI16M6mySXcpSYauMmnmM/E7SajAsjSdYt.pjaG1F3HPdS6";   // ‚Üê eintragen

async function loadDefaultPatterns() {
    setCloudStatus('loading', 'Muster laden...');

    // Cloud konfiguriert?
    const cloudReady = JSONBIN_BIN_ID && !JSONBIN_BIN_ID.includes('DEINE_');

    if (cloudReady) {
        try {
            const resp = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}/latest`, {
                headers: { 'X-Master-Key': JSONBIN_API_KEY }
            });
            if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
            const result = await resp.json();
            const data = result.record;
            if (data && data.patterns && data.patterns.length > 0) {
                loadPatternData(data, 'default-patterns.json');
                setCloudStatus('ok', `‚òÅ ${data.patterns.length} Muster (Cloud)`);
                cachePatterns();
                setTimeout(() => setCloudStatus('', 'cloud'), 4000);
                return;
            }
        } catch(err) {
            console.warn('Cloud nicht erreichbar:', err.message);
        }
    }

    // Fallback 1: localStorage-Cache
    const cached = loadCachedPatterns();
    if (cached) {
        setCloudStatus('err', `${cached} Muster (Cache)`);
        setTimeout(() => setCloudStatus('', 'cloud'), 5000);
        return;
    }

    // Fallback 2: Eingebettete Muster
    loadPatternData(DEFAULT_PATTERNS, 'default-patterns.json');
    setCloudStatus('err', `${DEFAULT_PATTERNS.patterns.length} Muster (lokal)`);
    setTimeout(() => setCloudStatus('', 'cloud'), 5000);
}

async function reloadFromCloud() {
    const cloudReady = JSONBIN_BIN_ID && !JSONBIN_BIN_ID.includes('DEINE_');
    if (!cloudReady) { showToast('‚ö†Ô∏è JSONBin noch nicht konfiguriert', 'warn'); return; }
    defaultPatternBundles=[]; defaultPatternGroups=[];
    await loadDefaultPatterns();
}

async function saveDefaultPatternsToFile() {
    const cloudReady = JSONBIN_BIN_ID && !JSONBIN_BIN_ID.includes('DEINE_');
    if (!cloudReady) { showToast('‚ö†Ô∏è JSONBin noch nicht konfiguriert (JSONBIN_BIN_ID & JSONBIN_API_KEY in index.html eintragen)', 'warn'); return; }
    if(defaultPatternBundles.length===0){showToast('Keine Standard-Muster vorhanden!', 'warn');return;}
    const pw=prompt("Passwort zum Speichern der Standard-Muster:");
    if(!pw)return;
    // Passwort lokal pr√ºfen (JSONBin braucht kein eigenes Passwort ‚Äî der API-Key sch√ºtzt das Schreiben)
    const localPw = JSONBIN_API_KEY.slice(-6); // letzten 6 Zeichen als Passwort-Pr√ºfung
    setCloudStatus('loading','Speichern...');
    try {
        const data = {
            patterns: defaultPatternBundles.map(p=>({...p,path:[],color:p.color||'#f5a623'})),
            groups:   defaultPatternGroups,
            listName: 'Standard-Muster'
        };
        const resp = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`, {
            method:  'PUT',
            headers: { 'Content-Type': 'application/json', 'X-Master-Key': JSONBIN_API_KEY },
            body:    JSON.stringify(data)
        });
        if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
        setCloudStatus('ok','Gespeichert ‚úì');
        cachePatterns();
        showToast("‚úÖ Standard-Muster in Cloud gespeichert! Alle Nutzer sehen die √Ñnderungen.", "ok");
        setTimeout(()=>setCloudStatus('','cloud'),4000);
    } catch(err) {
        setCloudStatus('err','Fehler');
        showToast("‚ùå Cloud-Fehler: "+err.message, "err");
        setTimeout(()=>setCloudStatus('','cloud'),4000);
    }
}

function cachePatterns(){
    try{localStorage.setItem('uwe_default_patterns',JSON.stringify({patterns:defaultPatternBundles,groups:defaultPatternGroups,listName:'Standard-Muster',cachedAt:new Date().toISOString()}));}
    catch(e){console.warn('localStorage nicht verf√ºgbar');}
}

function loadCachedPatterns(){
    try{
        const c=localStorage.getItem('uwe_default_patterns');
        if(c){
            const d=JSON.parse(c);
            if(d.patterns&&d.patterns.length>0){
                loadPatternData(d,'default-patterns.json');
                return d.patterns.length;
            }
        }
    }catch(e){}
    return 0;
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  PATTERN DATA IMPORT / EXPORT
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function loadPatternData(data, fileName) {
    if(!data.patterns||!Array.isArray(data.patterns))return false;
    const isDefault=(fileName&&fileName.toLowerCase()==='default-patterns.json');
    data.patterns.forEach(p=>{if(!p.color)p.color='#f5a623';});
    if(isDefault){
        defaultPatternBundles=data.patterns;
        if(data.groups&&Array.isArray(data.groups)){defaultPatternGroups=data.groups;}
        else{const gid='group_default_'+Date.now();defaultPatternGroups=[{id:gid,name:'Standard',collapsed:true}];defaultPatternBundles.forEach(p=>{if(!p.groupId)p.groupId=gid;});}
        defaultPatternGroups.forEach(g=>{collapsedGroups[g.id]=true;});
        isDefaultPatternList=true;
    } else {
        patternBundles=data.patterns;
        if(data.groups&&Array.isArray(data.groups)){patternGroups=data.groups;}
        else{const gid='group_'+Date.now();const cn=fileName.replace(/\.json$/i,'');patternListName=data.listName||cn;patternGroups=[{id:gid,name:patternListName||'Import',collapsed:false}];patternBundles.forEach(p=>{if(!p.groupId)p.groupId=gid;});}
        if(!patternListName){patternListName=data.listName||fileName.replace(/\.json$/i,'');}
        isDefaultPatternList=false;
    }
    updatePatternList();
    return true;
}

function importPatterns(event){
    const file=event.target.files[0];if(!file)return;
    const reader=new FileReader();
    reader.onerror=()=>alert("Ladefehler!");
    reader.onload=f=>{
        try{const d=JSON.parse(f.target.result);if(loadPatternData(d,file.name))alert(`${d.patterns.length} Muster importiert!`);else alert("Ung√ºltiges Format!");}
        catch(e){alert("Fehler: "+e.message);}
    };
    reader.readAsText(file);event.target.value='';
}

function exportPatterns(){
    if(patternBundles.length===0&&defaultPatternBundles.length===0){alert("Keine Muster vorhanden!");return;}
    let fn=patternListName||'uwe-muster';
    const ui=prompt("Dateiname (ohne .json):",fn);
    if(ui===null)return;fn=ui.trim()||fn;patternListName=fn;
    const data={patterns:patternBundles.map(p=>({...p,path:[]})),groups:patternGroups,listName:fn};
    const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
    const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=fn+'.json';a.click();URL.revokeObjectURL(a.href);
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  PROJECT SAVE / LOAD
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function saveProjectJSON(){
    if(allBundles.length===0){alert("Keine Daten!");return;}
    const def='UWE_'+new Date().toISOString().split('T')[0];
    const fn=prompt("Dateiname:",def);if(fn===null)return;
    const data={version:"1.0",mmPerPixel,realLengthValue:document.getElementById('realLength').value,bundles:allBundles,imageData:img.src&&img.src.startsWith('data:')?img.src:null,exportDate:new Date().toISOString()};
    const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
    const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=(fn.trim()||def)+'.json';a.click();URL.revokeObjectURL(a.href);
}

function loadProjectJSON(event){
    if(!event.target.files||!event.target.files[0])return;
    const reader=new FileReader();reader.onerror=()=>alert("Ladefehler!");
    reader.onload=e=>{
        try{
            const d=JSON.parse(e.target.result);
            allBundles=d.bundles||[];mmPerPixel=d.mmPerPixel||0;
            document.getElementById('realLength').value=d.realLengthValue||0;
            document.getElementById('btnMeasure').disabled=false;
            if(d.imageData){
                img.onload=()=>{
                    if(autoFitToWindow)resizeCanvas();else{canvas.width=img.width;canvas.height=img.height;imageScale=1;imageOffsetX=0;imageOffsetY=0;}
                    zoom=1;panX=0;panY=0;document.getElementById('canvasHint').style.display='none';
                    originalImageSnapshot=ctx.getImageData(0,0,canvas.width,canvas.height);rebuildDrawing();
                };
                img.src=d.imageData;
            }
            updateSidebarList();if(originalImageSnapshot)rebuildDrawing();
        }catch(err){alert("Ung√ºltige Projektdatei! "+err.message);}
    };
    reader.readAsText(event.target.files[0]);
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  EXPORT
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function exportWustec(){
    if(allBundles.length===0){alert("Keine Str√§nge vorhanden!");return;}
    let csv="ID;Quelle;Ziel;Querschnitt;Farbe;L√§nge_mm;Drucktext_Quelle;Drucktext_Ziel;Ader-Typ;Crimpung_Quelle;Crimpung_Ziel;Reserve_mm;BMK_Quelle;BMK_Ziel\n";
    allBundles.forEach((b,bi)=>{
        if(!b.wires||b.wires.length===0)return;
        const len=Math.round((b.len||0)+(b.pS||0)+(b.pE||0));
        b.wires.forEach((w,wi)=>{csv+=`${bi+1}_${wi+1};${w.s||''};${b.name||''};${w.cr||''};${w.c||''};${len};${w.s||''};${w.e||''};${w.t||''};Aderendh√ºlse;Aderendh√ºlse;0;${b.name||''};${b.name||''}\n`;});
    });
    const blob=new Blob([csv],{type:'text/csv;charset=utf-8;'});
    const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='Wustec_'+new Date().toISOString().split('T')[0]+'.csv';a.click();URL.revokeObjectURL(a.href);
}

function exportVisual(){
    if(!img.complete||img.width===0||allBundles.length===0){alert("Keine Daten!");return;}
    if(typeof window.jspdf==='undefined'){alert("PDF-Bibliothek nicht geladen!");return;}
    const {jsPDF}=window.jspdf;
    const ic=document.createElement('canvas');ic.width=img.width;ic.height=img.height;
    const ictx=ic.getContext('2d');ictx.drawImage(img,0,0);
    allBundles.forEach(b=>{
        if(!b.path||b.path.length===0)return;
        ictx.strokeStyle=b.color;ictx.lineWidth=Math.max(4,img.width/500);ictx.lineJoin='round';ictx.lineCap='round';
        ictx.beginPath();ictx.moveTo(b.path[0].x,b.path[0].y);b.path.forEach(p=>ictx.lineTo(p.x,p.y));ictx.stroke();
    });
    const pdf=new jsPDF({orientation:'portrait',unit:'mm',format:'a4'});
    const pw=210,ph=297,m=15,mw=pw-2*m,mh=ph-2*m;
    const iar=img.width/img.height;let iw=mw,ih=iw/iar;
    if(ih>mh){ih=mh;iw=ih*iar;}
    const xp=(pw-iw)/2;
    pdf.addImage(ic.toDataURL('image/png'),'PNG',xp,m,iw,ih);
    pdf.addPage();
    pdf.setFontSize(18);pdf.setFont(undefined,'bold');pdf.text('Legende ‚Äì Kabelstr√§nge',m,m+10);
    pdf.setFontSize(11);pdf.setFont(undefined,'normal');
    let yp=m+24;
    const colorMap={bk:'sw',bl:'bl',br:'br',gnge:'gnge',rt:'rt',gr:'gr',or:'or',ws:'ws',wsbk:'wsbk',dbl:'dbl',dblws:'dblws'};
    allBundles.forEach(b=>{
        if(yp>ph-m-6){pdf.addPage();yp=m+10;}
        pdf.setFillColor(b.color||'#000');pdf.circle(m+4,yp-1.5,2.5,'F');
        const wc=b.wires?b.wires.length:0;const tl=Math.round((b.len||0)+(b.pS||0)+(b.pE||0));
        const groups={};(b.wires||[]).forEach(w=>{const k=w.c+'_'+w.cr;if(!groups[k])groups[k]={n:colorMap[w.c]||w.c,cr:w.cr,count:0};groups[k].count++;});
        const spec=Object.values(groups).map(g=>`${g.count}x ${g.n}=${g.cr.replace('.',',')}mmq`).join(' ; ');
        pdf.text(`${b.name}: ${wc} Ader${wc!==1?'n':''}  ca.${tl}mm  ${spec}`,m+10,yp);yp+=7;
    });
    pdf.save('UWE_Doku_'+new Date().toISOString().split('T')[0]+'.pdf');
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  HELP
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function openHelpWindow(){
    const w=window.open('','UWE_Help','width=780,height=680,scrollbars=yes');
    if(!w){alert('Bitte Popups erlauben!');return;}
    w.document.write(`<!DOCTYPE html><html lang="de"><head><meta charset="UTF-8"><title>UWE Hilfe</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Syne:wght@700;800&family=Inter:wght@400;500&display=swap" rel="stylesheet">
    <style>*{box-sizing:border-box;margin:0;padding:0}body{font-family:'Inter',sans-serif;background:#0d0f14;color:#e8eaf2;padding:28px;line-height:1.7}
    .wrap{max-width:700px;margin:0 auto}h1{font-family:'Syne',sans-serif;font-size:1.8em;font-weight:800;background:linear-gradient(135deg,#4f7cff,#7c5cff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:6px}
    .sub{font-family:'DM Mono',monospace;font-size:11px;color:#5a5f7a;text-transform:uppercase;letter-spacing:1px;margin-bottom:24px}
    h2{font-family:'Syne',sans-serif;font-size:1.1em;font-weight:700;color:#7c5cff;margin:24px 0 10px}
    h3{font-size:.95em;font-weight:600;color:#a0b4ff;margin:16px 0 8px}
    p{margin-bottom:10px;font-size:14px}ul,ol{margin-left:20px;margin-bottom:12px}li{margin-bottom:6px;font-size:14px}
    .box{background:#191c26;border:1px solid #252836;border-radius:8px;padding:14px;margin:12px 0}
    .tip{border-left:3px solid #22d08a;padding:10px 14px;background:rgba(34,208,138,.08);border-radius:4px;margin:10px 0;font-size:13px}
    .warn{border-left:3px solid #f5a623;padding:10px 14px;background:rgba(245,166,35,.08);border-radius:4px;margin:10px 0;font-size:13px}
    code{background:#252836;padding:2px 6px;border-radius:4px;font-family:'DM Mono',monospace;font-size:12px}
    </style></head><body><div class="wrap">
    <h1>UWE</h1><div class="sub">Universal Wiring Engine ‚Äî Anleitung</div>
    <h2>Schnellstart</h2>
    <ol><li>Bild laden (Ribbon-Bar ‚Üí Bild)</li><li>Ma√üstab festlegen (‚Üí Ma√üstab)</li><li>Farbe w√§hlen & Strang zeichnen</li><li>Doppelklick beendet Zeichnen</li><li>Daten im Modal eingeben & Speichern</li></ol>
    <h2>Navigation</h2>
    <ul><li><code>Mausrad</code> ‚Äî Zoomen (zur Mausposition)</li><li><code>Mittlere Maustaste</code> ‚Äî Bild verschieben</li><li><code>Doppelklick</code> ‚Äî Zeichnen beenden</li></ul>
    <h2>Kabelstr√§nge</h2>
    <div class="box">
    <h3>Aktionen in der Strang-Liste</h3>
    <ul><li><code>üìã</code> Duplizieren</li><li><code>‚úé</code> Bearbeiten</li><li><code>‚Üª</code> Neu zeichnen (Pfad)</li><li><code>‚úï</code> L√∂schen</li><li>Farbpunkt klicken = Farbe √§ndern</li></ul>
    </div>
    <h2>Muster-Bibliothek</h2>
    <ul><li>Standard-Muster werden aus der Cloud geladen (Google Apps Script)</li><li><code>‚úì</code> Muster ausw√§hlen ‚Üí Pfad zeichnen ‚Üí Doppelklick ‚Üí Speichern</li><li>Muster k√∂nnen exportiert/importiert werden (JSON)</li></ul>
    <div class="tip">üí° Standard-Muster mit Passwort in Cloud speichern ‚Üí alle Nutzer erhalten die Updates automatisch beim n√§chsten Laden.</div>
    <h2>Cloud-Anbindung</h2>
    <div class="box">Die Status-Pille oben zeigt den Cloud-Status:<br><br>
    <ul><li>Blau = laden</li><li>Gr√ºn = erfolgreich</li><li>Gelb = Offline / Cache geladen</li></ul>
    Bei fehlender Cloud-Verbindung werden die zuletzt geladenen Muster aus dem Browser-Cache verwendet.</div>
    <h2>Export</h2>
    <ul><li><strong>Wustec CSV</strong> ‚Äî f√ºr Produktionssoftware</li><li><strong>PDF Doku</strong> ‚Äî A4, Bild + Legende</li><li><strong>Projekt speichern</strong> ‚Äî vollst√§ndiges JSON mit Bild</li></ul>
    <h2>Keyboard Navigation im Modal</h2>
    <ul><li><code>‚Üë‚Üì</code> ‚Äî gleiche Spalte, n√§chste/vorherige Zeile</li><li><code>‚Üê‚Üí</code> ‚Äî n√§chste/vorherige Spalte (oder Textcursor am Rand)</li></ul>
    </div></body></html>`);
    w.document.close();
}


// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  TOAST NOTIFICATIONS
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function showToast(message, type = 'info', duration = 3500) {
    const container = document.getElementById('toastContainer');
    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    toast.textContent = message;
    container.appendChild(toast);
    setTimeout(() => {
        toast.style.animation = 'toastOut 0.3s ease forwards';
        setTimeout(() => toast.remove(), 300);
    }, duration);
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  THEME TOGGLE
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function toggleTheme() {
    const isLight = document.body.classList.toggle('light');
    localStorage.setItem('uwe_theme', isLight ? 'light' : 'dark');
}

// Theme beim Start: Standard = Hell (light), au√üer user hat explizit dunkel gew√§hlt
(function() {
    const saved = localStorage.getItem('uwe_theme');
    if (saved === 'dark') {
        // Dunkel explizit gew√§hlt ‚Üí dunkel lassen
    } else {
        // Standard oder 'light' ‚Üí hell
        document.body.classList.add('light');
    }
})();

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//  INIT
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
resizeCanvas();

// Load initial patterns  
if (patternGroups.length===0) patternGroups.push({id:'group_'+Date.now(),name:'Neue Gruppe',collapsed:false});
updatePatternList();
updateSidebarList();

// Load cloud patterns
loadDefaultPatterns();
</script>
<!-- TOAST NOTIFICATIONS -->
<div id="toastContainer" style="
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 99999;
    display: flex;
    flex-direction: column;
    gap: 8px;
    pointer-events: none;
    align-items: center;
"></div>

</body>
</html>
